(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require('./zepto.min.js');
require('./zepto_fx_methods.js');

$.getJSON( "data/content.json", function( data ) {
	window.data = data;
	require("./main");
}, function(e) {
	console.log("ERROR FETCHING DATA");
});

},{"./main":3,"./zepto.min.js":4,"./zepto_fx_methods.js":5}],2:[function(require,module,exports){
var getIdentifier = function() {
	var input = window.location.hash;
	var h = input.substr(3).split("/");
	return h.join("");
};

var loadDiscus = function() {
	'use strict';
	
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
};

var reloadDiscus = function() {
	DISQUS.reset({
		reload: true,
		config: function () {  
			this.page.identifier = window.disqus_identifier;  
			this.page.URL = this.page.url = window.siteName + "#!" + window.disqus_identifier;
		}
	});
};

module.exports.load = function(pane) {
	window.disqus_shortname = 'rayban-vision';
	window.disqus_url = window.siteName;
	window.disqus_identifier = getIdentifier() + "X"; // window.location.hash;

	pane.$content.find("#disqus_thread").show();

	if (window.DISQUS) {
		reloadDiscus();
	} else {
        loadDiscus();
	}
};



},{}],3:[function(require,module,exports){
'use strict';

var disqus = require('./disqus');

console.log('Hello!');

var Pane = function(key) {
	this.$content = $(window.data[key]);
	this.key = key;

	this.bind();
};

Pane.prototype.inject = function($el, last) {
	// if (last) this.$content.css('opacity', 0);
	$el.append(this.$content);
	// if (last) this.$content.fadeIn(100);
};

Pane.prototype.only = function() {
	this.$content.addClass('only');
};

Pane.prototype.bind = function() {
	var pane = this;
	this.$content.find('#show-comments').off('click').click(function() {
		disqus.load(pane);
		$(this).hide();
	});
};

var Panes = function(sel, dflt) {
	this.$el = $(sel);
	this.defaultPane = dflt;
};

Panes.prototype.render = function(href) {
	var url = this.getURL(href);
	
	var panes = this.getPanes(url);

	this.$el.empty();

	for (var i = 0; i < panes.length; i++) {
		panes[i].inject(this.$el, i === panes.length - 1);
	}

	if (panes.length === 1) panes[0].only();

	this.bind();
};

Panes.prototype.getPane = function(key) {
	if (key in window.data) return new Pane(key);
	else if (key + "/index" in window.data) return new Pane(key + "/index");
};

Panes.prototype.getPanes = function(url) {
	'use strict';
	
	url = url.split('/');
	var panes = [];
	for (var i = 0; i < url.length; i++) {
		var prefix = url.slice(0, i + 1).join("/");
		var pane = this.getPane(prefix);
		// todo: if pane is undefined, push a "not found" pane into the stack
		panes.push(pane);
	}
	return panes;
};

Panes.prototype.getURL = function(href) {
	var url = href || window.location.hash || this.defaultPane;

	var hashbang = url.indexOf('#!/');
	var hashlen  = "#!/".length;

	if (hashbang >= 0) url = url.substring(hashbang + hashlen, url.length);
	
	return url;
};

Panes.prototype.setURL = function(href) {
	window.location = href;
};

Panes.prototype.bind = function() {
	var _this = this;

	$('a').off('click').click(function(e) {
		var href = $(this).attr("href");

		if ($(this).attr('target') === "_blank") return

		e.preventDefault();

		_this.setURL(href);
		_this.render(href);
	});
};

var main = new Panes("#content", 'about');
main.render();
},{"./disqus":2}],4:[function(require,module,exports){
/* Zepto v1.0-1-ga3cab6c - polyfill zepto detect event ajax form fx - zeptojs.com/license */
(function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(this===void 0||this===null)throw new TypeError;var c=Object(this),d=c.length>>>0,e=0,f;if(typeof b!="function")throw new TypeError;if(d==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)f=arguments[1];else do{if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError}while(!0);while(e<d)e in c&&(f=b.call(a,f,c[e],e,c)),e++;return f})})();var Zepto=function(){function E(a){return a==null?String(a):y[z.call(a)]||"object"}function F(a){return E(a)=="function"}function G(a){return a!=null&&a==a.window}function H(a){return a!=null&&a.nodeType==a.DOCUMENT_NODE}function I(a){return E(a)=="object"}function J(a){return I(a)&&!G(a)&&a.__proto__==Object.prototype}function K(a){return a instanceof Array}function L(a){return typeof a.length=="number"}function M(a){return g.call(a,function(a){return a!=null})}function N(a){return a.length>0?c.fn.concat.apply([],a):a}function O(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function P(a){return a in j?j[a]:j[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function Q(a,b){return typeof b=="number"&&!l[O(a)]?b+"px":b}function R(a){var b,c;return i[a]||(b=h.createElement(a),h.body.appendChild(b),c=k(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),c=="none"&&(c="block"),i[a]=c),i[a]}function S(a){return"children"in a?f.call(a.children):c.map(a.childNodes,function(a){if(a.nodeType==1)return a})}function T(c,d,e){for(b in d)e&&(J(d[b])||K(d[b]))?(J(d[b])&&!J(c[b])&&(c[b]={}),K(d[b])&&!K(c[b])&&(c[b]=[]),T(c[b],d[b],e)):d[b]!==a&&(c[b]=d[b])}function U(b,d){return d===a?c(b):c(b).filter(d)}function V(a,b,c,d){return F(b)?b.call(a,c,d):b}function W(a,b,c){c==null?a.removeAttribute(b):a.setAttribute(b,c)}function X(b,c){var d=b.className,e=d&&d.baseVal!==a;if(c===a)return e?d.baseVal:d;e?d.baseVal=c:b.className=c}function Y(a){var b;try{return a?a=="true"||(a=="false"?!1:a=="null"?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?c.parseJSON(a):a:b):a}catch(d){return a}}function Z(a,b){b(a);for(var c in a.childNodes)Z(a.childNodes[c],b)}var a,b,c,d,e=[],f=e.slice,g=e.filter,h=window.document,i={},j={},k=h.defaultView.getComputedStyle,l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},m=/^\s*<(\w+|!)[^>]*>/,n=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,o=/^(?:body|html)$/i,p=["val","css","html","text","data","width","height","offset"],q=["after","prepend","before","append"],r=h.createElement("table"),s=h.createElement("tr"),t={tr:h.createElement("tbody"),tbody:r,thead:r,tfoot:r,td:s,th:s,"*":h.createElement("div")},u=/complete|loaded|interactive/,v=/^\.([\w-]+)$/,w=/^#([\w-]*)$/,x=/^[\w-]+$/,y={},z=y.toString,A={},B,C,D=h.createElement("div");return A.matches=function(a,b){if(!a||a.nodeType!==1)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=D).appendChild(a),d=~A.qsa(e,b).indexOf(a),f&&D.removeChild(a),d},B=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},C=function(a){return g.call(a,function(b,c){return a.indexOf(b)==c})},A.fragment=function(b,d,e){b.replace&&(b=b.replace(n,"<$1></$2>")),d===a&&(d=m.test(b)&&RegExp.$1),d in t||(d="*");var g,h,i=t[d];return i.innerHTML=""+b,h=c.each(f.call(i.childNodes),function(){i.removeChild(this)}),J(e)&&(g=c(h),c.each(e,function(a,b){p.indexOf(a)>-1?g[a](b):g.attr(a,b)})),h},A.Z=function(a,b){return a=a||[],a.__proto__=c.fn,a.selector=b||"",a},A.isZ=function(a){return a instanceof A.Z},A.init=function(b,d){if(!b)return A.Z();if(F(b))return c(h).ready(b);if(A.isZ(b))return b;var e;if(K(b))e=M(b);else if(I(b))e=[J(b)?c.extend({},b):b],b=null;else if(m.test(b))e=A.fragment(b.trim(),RegExp.$1,d),b=null;else{if(d!==a)return c(d).find(b);e=A.qsa(h,b)}return A.Z(e,b)},c=function(a,b){return A.init(a,b)},c.extend=function(a){var b,c=f.call(arguments,1);return typeof a=="boolean"&&(b=a,a=c.shift()),c.forEach(function(c){T(a,c,b)}),a},A.qsa=function(a,b){var c;return H(a)&&w.test(b)?(c=a.getElementById(RegExp.$1))?[c]:[]:a.nodeType!==1&&a.nodeType!==9?[]:f.call(v.test(b)?a.getElementsByClassName(RegExp.$1):x.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},c.contains=function(a,b){return a!==b&&a.contains(b)},c.type=E,c.isFunction=F,c.isWindow=G,c.isArray=K,c.isPlainObject=J,c.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},c.inArray=function(a,b,c){return e.indexOf.call(b,a,c)},c.camelCase=B,c.trim=function(a){return a.trim()},c.uuid=0,c.support={},c.expr={},c.map=function(a,b){var c,d=[],e,f;if(L(a))for(e=0;e<a.length;e++)c=b(a[e],e),c!=null&&d.push(c);else for(f in a)c=b(a[f],f),c!=null&&d.push(c);return N(d)},c.each=function(a,b){var c,d;if(L(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},c.grep=function(a,b){return g.call(a,b)},window.JSON&&(c.parseJSON=JSON.parse),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){y["[object "+b+"]"]=b.toLowerCase()}),c.fn={forEach:e.forEach,reduce:e.reduce,push:e.push,sort:e.sort,indexOf:e.indexOf,concat:e.concat,map:function(a){return c(c.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return c(f.apply(this,arguments))},ready:function(a){return u.test(h.readyState)?a(c):h.addEventListener("DOMContentLoaded",function(){a(c)},!1),this},get:function(b){return b===a?f.call(this):this[b>=0?b:b+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(a){return e.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return F(a)?this.not(this.not(a)):c(g.call(this,function(b){return A.matches(b,a)}))},add:function(a,b){return c(C(this.concat(c(a,b))))},is:function(a){return this.length>0&&A.matches(this[0],a)},not:function(b){var d=[];if(F(b)&&b.call!==a)this.each(function(a){b.call(this,a)||d.push(this)});else{var e=typeof b=="string"?this.filter(b):L(b)&&F(b.item)?f.call(b):c(b);this.forEach(function(a){e.indexOf(a)<0&&d.push(a)})}return c(d)},has:function(a){return this.filter(function(){return I(a)?c.contains(this,a):c(this).find(a).size()})},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!I(a)?a:c(a)},last:function(){var a=this[this.length-1];return a&&!I(a)?a:c(a)},find:function(a){var b,d=this;return typeof a=="object"?b=c(a).filter(function(){var a=this;return e.some.call(d,function(b){return c.contains(b,a)})}):this.length==1?b=c(A.qsa(this[0],a)):b=this.map(function(){return A.qsa(this,a)}),b},closest:function(a,b){var d=this[0],e=!1;typeof a=="object"&&(e=c(a));while(d&&!(e?e.indexOf(d)>=0:A.matches(d,a)))d=d!==b&&!H(d)&&d.parentNode;return c(d)},parents:function(a){var b=[],d=this;while(d.length>0)d=c.map(d,function(a){if((a=a.parentNode)&&!H(a)&&b.indexOf(a)<0)return b.push(a),a});return U(b,a)},parent:function(a){return U(C(this.pluck("parentNode")),a)},children:function(a){return U(this.map(function(){return S(this)}),a)},contents:function(){return this.map(function(){return f.call(this.childNodes)})},siblings:function(a){return U(this.map(function(a,b){return g.call(S(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return c.map(this,function(b){return b[a]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),k(this,"").getPropertyValue("display")=="none"&&(this.style.display=R(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=F(a);if(this[0]&&!b)var d=c(a).get(0),e=d.parentNode||this.length>1;return this.each(function(f){c(this).wrapAll(b?a.call(this,f):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){c(this[0]).before(a=c(a));var b;while((b=a.children()).length)a=b.first();c(a).append(this)}return this},wrapInner:function(a){var b=F(a);return this.each(function(d){var e=c(this),f=e.contents(),g=b?a.call(this,d):a;f.length?f.wrapAll(g):e.append(g)})},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(b){return this.each(function(){var d=c(this);(b===a?d.css("display")=="none":b)?d.show():d.hide()})},prev:function(a){return c(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return c(this.pluck("nextElementSibling")).filter(a||"*")},html:function(b){return b===a?this.length>0?this[0].innerHTML:null:this.each(function(a){var d=this.innerHTML;c(this).empty().append(V(this,b,a,d))})},text:function(b){return b===a?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=b})},attr:function(c,d){var e;return typeof c=="string"&&d===a?this.length==0||this[0].nodeType!==1?a:c=="value"&&this[0].nodeName=="INPUT"?this.val():!(e=this[0].getAttribute(c))&&c in this[0]?this[0][c]:e:this.each(function(a){if(this.nodeType!==1)return;if(I(c))for(b in c)W(this,b,c[b]);else W(this,c,V(this,d,a,this.getAttribute(c)))})},removeAttr:function(a){return this.each(function(){this.nodeType===1&&W(this,a)})},prop:function(b,c){return c===a?this[0]&&this[0][b]:this.each(function(a){this[b]=V(this,c,a,this[b])})},data:function(b,c){var d=this.attr("data-"+O(b),c);return d!==null?Y(d):a},val:function(b){return b===a?this[0]&&(this[0].multiple?c(this[0]).find("option").filter(function(a){return this.selected}).pluck("value"):this[0].value):this.each(function(a){this.value=V(this,b,a,this.value)})},offset:function(a){if(a)return this.each(function(b){var d=c(this),e=V(this,a,b,d.offset()),f=d.offsetParent().offset(),g={top:e.top-f.top,left:e.left-f.left};d.css("position")=="static"&&(g.position="relative"),d.css(g)});if(this.length==0)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(a,c){if(arguments.length<2&&typeof a=="string")return this[0]&&(this[0].style[B(a)]||k(this[0],"").getPropertyValue(a));var d="";if(E(a)=="string")!c&&c!==0?this.each(function(){this.style.removeProperty(O(a))}):d=O(a)+":"+Q(a,c);else for(b in a)!a[b]&&a[b]!==0?this.each(function(){this.style.removeProperty(O(b))}):d+=O(b)+":"+Q(b,a[b])+";";return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(c(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return e.some.call(this,function(a){return this.test(X(a))},P(a))},addClass:function(a){return this.each(function(b){d=[];var e=X(this),f=V(this,a,b,e);f.split(/\s+/g).forEach(function(a){c(this).hasClass(a)||d.push(a)},this),d.length&&X(this,e+(e?" ":"")+d.join(" "))})},removeClass:function(b){return this.each(function(c){if(b===a)return X(this,"");d=X(this),V(this,b,c,d).split(/\s+/g).forEach(function(a){d=d.replace(P(a)," ")}),X(this,d.trim())})},toggleClass:function(b,d){return this.each(function(e){var f=c(this),g=V(this,b,e,X(this));g.split(/\s+/g).forEach(function(b){(d===a?!f.hasClass(b):d)?f.addClass(b):f.removeClass(b)})})},scrollTop:function(){if(!this.length)return;return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(!this.length)return;var a=this[0],b=this.offsetParent(),d=this.offset(),e=o.test(b[0].nodeName)?{top:0,left:0}:b.offset();return d.top-=parseFloat(c(a).css("margin-top"))||0,d.left-=parseFloat(c(a).css("margin-left"))||0,e.top+=parseFloat(c(b[0]).css("border-top-width"))||0,e.left+=parseFloat(c(b[0]).css("border-left-width"))||0,{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||h.body;while(a&&!o.test(a.nodeName)&&c(a).css("position")=="static")a=a.offsetParent;return a})}},c.fn.detach=c.fn.remove,["width","height"].forEach(function(b){c.fn[b]=function(d){var e,f=this[0],g=b.replace(/./,function(a){return a[0].toUpperCase()});return d===a?G(f)?f["inner"+g]:H(f)?f.documentElement["offset"+g]:(e=this.offset())&&e[b]:this.each(function(a){f=c(this),f.css(b,V(this,d,a,f[b]()))})}}),q.forEach(function(a,b){var d=b%2;c.fn[a]=function(){var a,e=c.map(arguments,function(b){return a=E(b),a=="object"||a=="array"||b==null?b:A.fragment(b)}),f,g=this.length>1;return e.length<1?this:this.each(function(a,h){f=d?h:h.parentNode,h=b==0?h.nextSibling:b==1?h.firstChild:b==2?h:null,e.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!f)return c(a).remove();Z(f.insertBefore(a,h),function(a){a.nodeName!=null&&a.nodeName.toUpperCase()==="SCRIPT"&&(!a.type||a.type==="text/javascript")&&!a.src&&window.eval.call(window,a.innerHTML)})})})},c.fn[d?a+"To":"insert"+(b?"Before":"After")]=function(b){return c(b)[a](this),this}}),A.Z.prototype=c.fn,A.uniq=C,A.deserializeValue=Y,c.zepto=A,c}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);if(c.webkit=!!d)c.version=d[1];e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),m&&(b.bb10=!0,b.version=m[2]),n&&(b.rimtabletos=!0,b.version=n[2]),o&&(c.playbook=!0),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),p&&(c.chrome=!0,c.version=p[1]),q&&(c.firefox=!0,c.version=q[1]),b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/)),b.phone=!b.tablet&&!!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/))}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a){function g(a){return a._zid||(a._zid=d++)}function h(a,b,d,e){b=i(b);if(b.ns)var f=j(b.ns);return(c[g(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||f.test(a.ns))&&(!d||g(a.fn)===g(d))&&(!e||a.sel==e)})}function i(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function j(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function k(b,c,d){a.type(b)!="string"?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function l(a,b){return a.del&&(a.e=="focus"||a.e=="blur")||!!b}function m(a){return f[a]||a}function n(b,d,e,h,j,n){var o=g(b),p=c[o]||(c[o]=[]);k(d,e,function(c,d){var e=i(c);e.fn=d,e.sel=h,e.e in f&&(d=function(b){var c=b.relatedTarget;if(!c||c!==this&&!a.contains(this,c))return e.fn.apply(this,arguments)}),e.del=j&&j(d,c);var g=e.del||d;e.proxy=function(a){var c=g.apply(b,[a].concat(a.data));return c===!1&&(a.preventDefault(),a.stopPropagation()),c},e.i=p.length,p.push(e),b.addEventListener(m(e.e),e.proxy,l(e,n))})}function o(a,b,d,e,f){var i=g(a);k(b||"",d,function(b,d){h(a,b,d,e).forEach(function(b){delete c[i][b.i],a.removeEventListener(m(b.e),b.proxy,l(b,f))})})}function t(b){var c,d={originalEvent:b};for(c in b)!r.test(c)&&b[c]!==undefined&&(d[c]=b[c]);return a.each(s,function(a,c){d[a]=function(){return this[c]=p,b[a].apply(b,arguments)},d[c]=q}),d}function u(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var b=a.zepto.qsa,c={},d=1,e={},f={mouseenter:"mouseover",mouseleave:"mouseout"};e.click=e.mousedown=e.mouseup=e.mousemove="MouseEvents",a.event={add:n,remove:o},a.proxy=function(b,c){if(a.isFunction(b)){var d=function(){return b.apply(c,arguments)};return d._zid=g(b),d}if(typeof c=="string")return a.proxy(b[c],b);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){n(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){o(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){n(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return o(d,b,a),c}})})};var p=function(){return!0},q=function(){return!1},r=/^([A-Z]|layer[XY]$)/,s={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){return this.each(function(e,f){n(f,c,d,b,function(c){return function(d){var e,g=a(d.target).closest(b,f).get(0);if(g)return e=a.extend(t(d),{currentTarget:g,liveFired:f}),c.apply(g,[e].concat([].slice.call(arguments,1)))}})})},a.fn.undelegate=function(a,b,c){return this.each(function(){o(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return!c||a.isFunction(c)?this.bind(b,c||d):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return!c||a.isFunction(c)?this.unbind(b,c||d):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){if(typeof b=="string"||a.isPlainObject(b))b=a.Event(b);return u(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,c){var d,e;return this.each(function(f,g){d=t(typeof b=="string"?a.Event(b):b),d.data=c,d.target=g,a.each(h(g,b.type||b),function(a,b){e=b.proxy(d);if(d.isImmediatePropagationStopped())return!1})}),e},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){typeof a!="string"&&(b=a,a=b.type);var c=document.createEvent(e[a]||"Events"),d=!0;if(b)for(var f in b)f=="bubbles"?d=!!b[f]:c[f]=b[f];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c.isDefaultPrevented=function(){return this.defaultPrevented},c}}(Zepto),function($){function triggerAndReturn(a,b,c){var d=$.Event(b);return $(a).trigger(d,c),!d.defaultPrevented}function triggerGlobal(a,b,c,d){if(a.global)return triggerAndReturn(b||document,c,d)}function ajaxStart(a){a.global&&$.active++===0&&triggerGlobal(a,null,"ajaxStart")}function ajaxStop(a){a.global&&!--$.active&&triggerGlobal(a,null,"ajaxStop")}function ajaxBeforeSend(a,b){var c=b.context;if(b.beforeSend.call(c,a,b)===!1||triggerGlobal(b,c,"ajaxBeforeSend",[a,b])===!1)return!1;triggerGlobal(b,c,"ajaxSend",[a,b])}function ajaxSuccess(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),triggerGlobal(c,d,"ajaxSuccess",[b,c,a]),ajaxComplete(e,b,c)}function ajaxError(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),triggerGlobal(d,e,"ajaxError",[c,d,a]),ajaxComplete(b,c,d)}function ajaxComplete(a,b,c){var d=c.context;c.complete.call(d,b,a),triggerGlobal(c,d,"ajaxComplete",[b,c]),ajaxStop(c)}function empty(){}function mimeToDataType(a){return a&&(a=a.split(";",2)[0]),a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function serializeData(a){a.processData&&a.data&&$.type(a.data)!="string"&&(a.data=$.param(a.data,a.traditional)),a.data&&(!a.type||a.type.toUpperCase()=="GET")&&(a.url=appendQuery(a.url,a.data))}function parseArguments(a,b,c,d){var e=!$.isFunction(b);return{url:a,data:e?b:undefined,success:e?$.isFunction(c)?c:undefined:b,dataType:e?d||c:c}}function serialize(a,b,c,d){var e,f=$.isArray(b);$.each(b,function(b,g){e=$.type(g),d&&(b=c?d:d+"["+(f?"":b)+"]"),!d&&f?a.add(g.name,g.value):e=="array"||!c&&e=="object"?serialize(a,g,c,b):a.add(b,g)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(a){if("type"in a){var b="jsonp"+ ++jsonpID,c=document.createElement("script"),d=function(){clearTimeout(g),$(c).remove(),delete window[b]},e=function(c){d();if(!c||c=="timeout")window[b]=empty;ajaxError(null,c||"abort",f,a)},f={abort:e},g;return ajaxBeforeSend(f,a)===!1?(e("abort"),!1):(window[b]=function(b){d(),ajaxSuccess(b,f,a)},c.onerror=function(){e("error")},c.src=a.url.replace(/=\?/,"="+b),$("head").append(c),a.timeout>0&&(g=setTimeout(function(){e("timeout")},a.timeout)),f)}return $.ajax(a)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,xhr.status?"error":"abort",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(a,b,c,d){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(a,b,c,d){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(a,b,c){var d=parseArguments.apply(null,arguments);return d.dataType="json",$.ajax(d)},$.fn.load=function(a,b,c){if(!this.length)return this;var d=this,e=a.split(/\s/),f,g=parseArguments(a,b,c),h=g.success;return e.length>1&&(g.url=e[0],f=e[1]),g.success=function(a){d.html(f?$("<div>").html(a.replace(rscript,"")).find(f):a),h&&h.apply(d,arguments)},$.ajax(g),this};var escape=encodeURIComponent;$.param=function(a,b){var c=[];return c.add=function(a,b){this.push(escape(a)+"="+escape(b))},serialize(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b=[],c;return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&(d!="radio"&&d!="checkbox"||this.checked)&&b.push({name:c.attr("name"),value:c.val()})}),b},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a,b){function s(a){return t(a.replace(/([a-z])([A-Z])/,"$1-$2"))}function t(a){return a.toLowerCase()}function u(a){return d?d+a:t(a)}var c="",d,e,f,g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k,l,m,n,o,p,q,r={};a.each(g,function(a,e){if(i.style[a+"TransitionProperty"]!==b)return c="-"+t(a)+"-",d=e,!1}),k=c+"transform",r[l=c+"transition-property"]=r[m=c+"transition-duration"]=r[n=c+"transition-timing-function"]=r[o=c+"animation-name"]=r[p=c+"animation-duration"]=r[q=c+"animation-timing-function"]="",a.fx={off:d===b&&i.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:c,transitionEnd:u("TransitionEnd"),animationEnd:u("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isPlainObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c=(typeof c=="number"?c:a.fx.speeds[c]||a.fx.speeds._default)/1e3),this.anim(b,c,d,e)},a.fn.anim=function(c,d,e,f){var g,h={},i,t="",u=this,v,w=a.fx.transitionEnd;d===b&&(d=.4),a.fx.off&&(d=0);if(typeof c=="string")h[o]=c,h[p]=d+"s",h[q]=e||"linear",w=a.fx.animationEnd;else{i=[];for(g in c)j.test(g)?t+=g+"("+c[g]+") ":(h[g]=c[g],i.push(s(g)));t&&(h[k]=t,i.push(k)),d>0&&typeof c=="object"&&(h[l]=i.join(", "),h[m]=d+"s",h[n]=e||"linear")}return v=function(b){if(typeof b!="undefined"){if(b.target!==b.currentTarget)return;a(b.target).unbind(w,v)}a(this).css(r),f&&f.call(this)},d>0&&this.bind(w,v),this.size()&&this.get(0).clientLeft,this.css(h),d<=0&&setTimeout(function(){u.each(function(){v.call(this)})},0),this},i=null}(Zepto)
},{}],5:[function(require,module,exports){
//     Zepto.js
//     (c) 2010-2015 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

;(function($, undefined){
  var document = window.document, docElem = document.documentElement,
    origShow = $.fn.show, origHide = $.fn.hide, origToggle = $.fn.toggle

  function anim(el, speed, opacity, scale, callback) {
    if (typeof speed == 'function' && !callback) callback = speed, speed = undefined
    var props = { opacity: opacity }
    if (scale) {
      props.scale = scale
      el.css($.fx.cssPrefix + 'transform-origin', '0 0')
    }
    return el.animate(props, speed, null, callback)
  }

  function hide(el, speed, scale, callback) {
    return anim(el, speed, 0, scale, function(){
      origHide.call($(this))
      callback && callback.call(this)
    })
  }

  $.fn.show = function(speed, callback) {
    origShow.call(this)
    if (speed === undefined) speed = 0
    else this.css('opacity', 0)
    return anim(this, speed, 1, '1,1', callback)
  }

  $.fn.hide = function(speed, callback) {
    if (speed === undefined) return origHide.call(this)
    else return hide(this, speed, '0,0', callback)
  }

  $.fn.toggle = function(speed, callback) {
    if (speed === undefined || typeof speed == 'boolean')
      return origToggle.call(this, speed)
    else return this.each(function(){
      var el = $(this)
      el[el.css('display') == 'none' ? 'show' : 'hide'](speed, callback)
    })
  }

  $.fn.fadeTo = function(speed, opacity, callback) {
    return anim(this, speed, opacity, null, callback)
  }

  $.fn.fadeIn = function(speed, callback) {
    var target = this.css('opacity')
    if (target > 0) this.css('opacity', 0)
    else target = 1
    return origShow.call(this).fadeTo(speed, target, callback)
  }

  $.fn.fadeOut = function(speed, callback) {
    return hide(this, speed, null, callback)
  }

  $.fn.fadeToggle = function(speed, callback) {
    return this.each(function(){
      var el = $(this)
      el[
        (el.css('opacity') == 0 || el.css('display') == 'none') ? 'fadeIn' : 'fadeOut'
      ](speed, callback)
    })
  }

})(Zepto)
},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfc2NyaXB0cy9pbml0LmpzIiwiX3NjcmlwdHMvZGlzcXVzLmpzIiwiX3NjcmlwdHMvbWFpbi5qcyIsIl9zY3JpcHRzL3plcHRvLm1pbi5qcyIsIl9zY3JpcHRzL3plcHRvX2Z4X21ldGhvZHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwicmVxdWlyZSgnLi96ZXB0by5taW4uanMnKTtcbnJlcXVpcmUoJy4vemVwdG9fZnhfbWV0aG9kcy5qcycpO1xuXG4kLmdldEpTT04oIFwiZGF0YS9jb250ZW50Lmpzb25cIiwgZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHdpbmRvdy5kYXRhID0gZGF0YTtcblx0cmVxdWlyZShcIi4vbWFpblwiKTtcbn0sIGZ1bmN0aW9uKGUpIHtcblx0Y29uc29sZS5sb2coXCJFUlJPUiBGRVRDSElORyBEQVRBXCIpO1xufSk7XG4iLCJ2YXIgZ2V0SWRlbnRpZmllciA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0dmFyIGggPSBpbnB1dC5zdWJzdHIoMykuc3BsaXQoXCIvXCIpO1xuXHRyZXR1cm4gaC5qb2luKFwiXCIpO1xufTtcblxudmFyIGxvYWREaXNjdXMgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHRcdHZhciBkc3EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZHNxLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZHNxLmFzeW5jID0gdHJ1ZTtcblx0XHRkc3Euc3JjID0gJy8vJyArIGRpc3F1c19zaG9ydG5hbWUgKyAnLmRpc3F1cy5jb20vZW1iZWQuanMnO1xuXHRcdChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0pLmFwcGVuZENoaWxkKGRzcSk7XG5cdH0pKCk7XG59O1xuXG52YXIgcmVsb2FkRGlzY3VzID0gZnVuY3Rpb24oKSB7XG5cdERJU1FVUy5yZXNldCh7XG5cdFx0cmVsb2FkOiB0cnVlLFxuXHRcdGNvbmZpZzogZnVuY3Rpb24gKCkgeyAgXG5cdFx0XHR0aGlzLnBhZ2UuaWRlbnRpZmllciA9IHdpbmRvdy5kaXNxdXNfaWRlbnRpZmllcjsgIFxuXHRcdFx0dGhpcy5wYWdlLlVSTCA9IHRoaXMucGFnZS51cmwgPSB3aW5kb3cuc2l0ZU5hbWUgKyBcIiMhXCIgKyB3aW5kb3cuZGlzcXVzX2lkZW50aWZpZXI7XG5cdFx0fVxuXHR9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzLmxvYWQgPSBmdW5jdGlvbihwYW5lKSB7XG5cdHdpbmRvdy5kaXNxdXNfc2hvcnRuYW1lID0gJ3JheWJhbi12aXNpb24nO1xuXHR3aW5kb3cuZGlzcXVzX3VybCA9IHdpbmRvdy5zaXRlTmFtZTtcblx0d2luZG93LmRpc3F1c19pZGVudGlmaWVyID0gZ2V0SWRlbnRpZmllcigpICsgXCJYXCI7IC8vIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXG5cdHBhbmUuJGNvbnRlbnQuZmluZChcIiNkaXNxdXNfdGhyZWFkXCIpLnNob3coKTtcblxuXHRpZiAod2luZG93LkRJU1FVUykge1xuXHRcdHJlbG9hZERpc2N1cygpO1xuXHR9IGVsc2Uge1xuICAgICAgICBsb2FkRGlzY3VzKCk7XG5cdH1cbn07XG5cblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGlzcXVzID0gcmVxdWlyZSgnLi9kaXNxdXMnKTtcblxuY29uc29sZS5sb2coJ0hlbGxvIScpO1xuXG52YXIgUGFuZSA9IGZ1bmN0aW9uKGtleSkge1xuXHR0aGlzLiRjb250ZW50ID0gJCh3aW5kb3cuZGF0YVtrZXldKTtcblx0dGhpcy5rZXkgPSBrZXk7XG5cblx0dGhpcy5iaW5kKCk7XG59O1xuXG5QYW5lLnByb3RvdHlwZS5pbmplY3QgPSBmdW5jdGlvbigkZWwsIGxhc3QpIHtcblx0Ly8gaWYgKGxhc3QpIHRoaXMuJGNvbnRlbnQuY3NzKCdvcGFjaXR5JywgMCk7XG5cdCRlbC5hcHBlbmQodGhpcy4kY29udGVudCk7XG5cdC8vIGlmIChsYXN0KSB0aGlzLiRjb250ZW50LmZhZGVJbigxMDApO1xufTtcblxuUGFuZS5wcm90b3R5cGUub25seSA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLiRjb250ZW50LmFkZENsYXNzKCdvbmx5Jyk7XG59O1xuXG5QYW5lLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBwYW5lID0gdGhpcztcblx0dGhpcy4kY29udGVudC5maW5kKCcjc2hvdy1jb21tZW50cycpLm9mZignY2xpY2snKS5jbGljayhmdW5jdGlvbigpIHtcblx0XHRkaXNxdXMubG9hZChwYW5lKTtcblx0XHQkKHRoaXMpLmhpZGUoKTtcblx0fSk7XG59O1xuXG52YXIgUGFuZXMgPSBmdW5jdGlvbihzZWwsIGRmbHQpIHtcblx0dGhpcy4kZWwgPSAkKHNlbCk7XG5cdHRoaXMuZGVmYXVsdFBhbmUgPSBkZmx0O1xufTtcblxuUGFuZXMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKGhyZWYpIHtcblx0dmFyIHVybCA9IHRoaXMuZ2V0VVJMKGhyZWYpO1xuXHRcblx0dmFyIHBhbmVzID0gdGhpcy5nZXRQYW5lcyh1cmwpO1xuXG5cdHRoaXMuJGVsLmVtcHR5KCk7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdHBhbmVzW2ldLmluamVjdCh0aGlzLiRlbCwgaSA9PT0gcGFuZXMubGVuZ3RoIC0gMSk7XG5cdH1cblxuXHRpZiAocGFuZXMubGVuZ3RoID09PSAxKSBwYW5lc1swXS5vbmx5KCk7XG5cblx0dGhpcy5iaW5kKCk7XG59O1xuXG5QYW5lcy5wcm90b3R5cGUuZ2V0UGFuZSA9IGZ1bmN0aW9uKGtleSkge1xuXHRpZiAoa2V5IGluIHdpbmRvdy5kYXRhKSByZXR1cm4gbmV3IFBhbmUoa2V5KTtcblx0ZWxzZSBpZiAoa2V5ICsgXCIvaW5kZXhcIiBpbiB3aW5kb3cuZGF0YSkgcmV0dXJuIG5ldyBQYW5lKGtleSArIFwiL2luZGV4XCIpO1xufTtcblxuUGFuZXMucHJvdG90eXBlLmdldFBhbmVzID0gZnVuY3Rpb24odXJsKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHVybCA9IHVybC5zcGxpdCgnLycpO1xuXHR2YXIgcGFuZXMgPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB1cmwubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgcHJlZml4ID0gdXJsLnNsaWNlKDAsIGkgKyAxKS5qb2luKFwiL1wiKTtcblx0XHR2YXIgcGFuZSA9IHRoaXMuZ2V0UGFuZShwcmVmaXgpO1xuXHRcdC8vIHRvZG86IGlmIHBhbmUgaXMgdW5kZWZpbmVkLCBwdXNoIGEgXCJub3QgZm91bmRcIiBwYW5lIGludG8gdGhlIHN0YWNrXG5cdFx0cGFuZXMucHVzaChwYW5lKTtcblx0fVxuXHRyZXR1cm4gcGFuZXM7XG59O1xuXG5QYW5lcy5wcm90b3R5cGUuZ2V0VVJMID0gZnVuY3Rpb24oaHJlZikge1xuXHR2YXIgdXJsID0gaHJlZiB8fCB3aW5kb3cubG9jYXRpb24uaGFzaCB8fCB0aGlzLmRlZmF1bHRQYW5lO1xuXG5cdHZhciBoYXNoYmFuZyA9IHVybC5pbmRleE9mKCcjIS8nKTtcblx0dmFyIGhhc2hsZW4gID0gXCIjIS9cIi5sZW5ndGg7XG5cblx0aWYgKGhhc2hiYW5nID49IDApIHVybCA9IHVybC5zdWJzdHJpbmcoaGFzaGJhbmcgKyBoYXNobGVuLCB1cmwubGVuZ3RoKTtcblx0XG5cdHJldHVybiB1cmw7XG59O1xuXG5QYW5lcy5wcm90b3R5cGUuc2V0VVJMID0gZnVuY3Rpb24oaHJlZikge1xuXHR3aW5kb3cubG9jYXRpb24gPSBocmVmO1xufTtcblxuUGFuZXMucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbigpIHtcblx0dmFyIF90aGlzID0gdGhpcztcblxuXHQkKCdhJykub2ZmKCdjbGljaycpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblx0XHR2YXIgaHJlZiA9ICQodGhpcykuYXR0cihcImhyZWZcIik7XG5cblx0XHRpZiAoJCh0aGlzKS5hdHRyKCd0YXJnZXQnKSA9PT0gXCJfYmxhbmtcIikgcmV0dXJuXG5cblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRfdGhpcy5zZXRVUkwoaHJlZik7XG5cdFx0X3RoaXMucmVuZGVyKGhyZWYpO1xuXHR9KTtcbn07XG5cbnZhciBtYWluID0gbmV3IFBhbmVzKFwiI2NvbnRlbnRcIiwgJ2Fib3V0Jyk7XG5tYWluLnJlbmRlcigpOyIsIi8qIFplcHRvIHYxLjAtMS1nYTNjYWI2YyAtIHBvbHlmaWxsIHplcHRvIGRldGVjdCBldmVudCBhamF4IGZvcm0gZnggLSB6ZXB0b2pzLmNvbS9saWNlbnNlICovXG4oZnVuY3Rpb24oYSl7U3RyaW5nLnByb3RvdHlwZS50cmltPT09YSYmKFN0cmluZy5wcm90b3R5cGUudHJpbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9KSxBcnJheS5wcm90b3R5cGUucmVkdWNlPT09YSYmKEFycmF5LnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24oYil7aWYodGhpcz09PXZvaWQgMHx8dGhpcz09PW51bGwpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgYz1PYmplY3QodGhpcyksZD1jLmxlbmd0aD4+PjAsZT0wLGY7aWYodHlwZW9mIGIhPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgVHlwZUVycm9yO2lmKGQ9PTAmJmFyZ3VtZW50cy5sZW5ndGg9PTEpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZihhcmd1bWVudHMubGVuZ3RoPj0yKWY9YXJndW1lbnRzWzFdO2Vsc2UgZG97aWYoZSBpbiBjKXtmPWNbZSsrXTticmVha31pZigrK2U+PWQpdGhyb3cgbmV3IFR5cGVFcnJvcn13aGlsZSghMCk7d2hpbGUoZTxkKWUgaW4gYyYmKGY9Yi5jYWxsKGEsZixjW2VdLGUsYykpLGUrKztyZXR1cm4gZn0pfSkoKTt2YXIgWmVwdG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBFKGEpe3JldHVybiBhPT1udWxsP1N0cmluZyhhKTp5W3ouY2FsbChhKV18fFwib2JqZWN0XCJ9ZnVuY3Rpb24gRihhKXtyZXR1cm4gRShhKT09XCJmdW5jdGlvblwifWZ1bmN0aW9uIEcoYSl7cmV0dXJuIGEhPW51bGwmJmE9PWEud2luZG93fWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGEhPW51bGwmJmEubm9kZVR5cGU9PWEuRE9DVU1FTlRfTk9ERX1mdW5jdGlvbiBJKGEpe3JldHVybiBFKGEpPT1cIm9iamVjdFwifWZ1bmN0aW9uIEooYSl7cmV0dXJuIEkoYSkmJiFHKGEpJiZhLl9fcHJvdG9fXz09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiBLKGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXJyYXl9ZnVuY3Rpb24gTChhKXtyZXR1cm4gdHlwZW9mIGEubGVuZ3RoPT1cIm51bWJlclwifWZ1bmN0aW9uIE0oYSl7cmV0dXJuIGcuY2FsbChhLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsfSl9ZnVuY3Rpb24gTihhKXtyZXR1cm4gYS5sZW5ndGg+MD9jLmZuLmNvbmNhdC5hcHBseShbXSxhKTphfWZ1bmN0aW9uIE8oYSl7cmV0dXJuIGEucmVwbGFjZSgvOjovZyxcIi9cIikucmVwbGFjZSgvKFtBLVpdKykoW0EtWl1bYS16XSkvZyxcIiQxXyQyXCIpLnJlcGxhY2UoLyhbYS16XFxkXSkoW0EtWl0pL2csXCIkMV8kMlwiKS5yZXBsYWNlKC9fL2csXCItXCIpLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gUChhKXtyZXR1cm4gYSBpbiBqP2pbYV06althXT1uZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrYStcIihcXFxcc3wkKVwiKX1mdW5jdGlvbiBRKGEsYil7cmV0dXJuIHR5cGVvZiBiPT1cIm51bWJlclwiJiYhbFtPKGEpXT9iK1wicHhcIjpifWZ1bmN0aW9uIFIoYSl7dmFyIGIsYztyZXR1cm4gaVthXXx8KGI9aC5jcmVhdGVFbGVtZW50KGEpLGguYm9keS5hcHBlbmRDaGlsZChiKSxjPWsoYixcIlwiKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYz09XCJub25lXCImJihjPVwiYmxvY2tcIiksaVthXT1jKSxpW2FdfWZ1bmN0aW9uIFMoYSl7cmV0dXJuXCJjaGlsZHJlblwiaW4gYT9mLmNhbGwoYS5jaGlsZHJlbik6Yy5tYXAoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpe2lmKGEubm9kZVR5cGU9PTEpcmV0dXJuIGF9KX1mdW5jdGlvbiBUKGMsZCxlKXtmb3IoYiBpbiBkKWUmJihKKGRbYl0pfHxLKGRbYl0pKT8oSihkW2JdKSYmIUooY1tiXSkmJihjW2JdPXt9KSxLKGRbYl0pJiYhSyhjW2JdKSYmKGNbYl09W10pLFQoY1tiXSxkW2JdLGUpKTpkW2JdIT09YSYmKGNbYl09ZFtiXSl9ZnVuY3Rpb24gVShiLGQpe3JldHVybiBkPT09YT9jKGIpOmMoYikuZmlsdGVyKGQpfWZ1bmN0aW9uIFYoYSxiLGMsZCl7cmV0dXJuIEYoYik/Yi5jYWxsKGEsYyxkKTpifWZ1bmN0aW9uIFcoYSxiLGMpe2M9PW51bGw/YS5yZW1vdmVBdHRyaWJ1dGUoYik6YS5zZXRBdHRyaWJ1dGUoYixjKX1mdW5jdGlvbiBYKGIsYyl7dmFyIGQ9Yi5jbGFzc05hbWUsZT1kJiZkLmJhc2VWYWwhPT1hO2lmKGM9PT1hKXJldHVybiBlP2QuYmFzZVZhbDpkO2U/ZC5iYXNlVmFsPWM6Yi5jbGFzc05hbWU9Y31mdW5jdGlvbiBZKGEpe3ZhciBiO3RyeXtyZXR1cm4gYT9hPT1cInRydWVcInx8KGE9PVwiZmFsc2VcIj8hMTphPT1cIm51bGxcIj9udWxsOmlzTmFOKGI9TnVtYmVyKGEpKT8vXltcXFtcXHtdLy50ZXN0KGEpP2MucGFyc2VKU09OKGEpOmE6Yik6YX1jYXRjaChkKXtyZXR1cm4gYX19ZnVuY3Rpb24gWihhLGIpe2IoYSk7Zm9yKHZhciBjIGluIGEuY2hpbGROb2RlcylaKGEuY2hpbGROb2Rlc1tjXSxiKX12YXIgYSxiLGMsZCxlPVtdLGY9ZS5zbGljZSxnPWUuZmlsdGVyLGg9d2luZG93LmRvY3VtZW50LGk9e30saj17fSxrPWguZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSxsPXtcImNvbHVtbi1jb3VudFwiOjEsY29sdW1uczoxLFwiZm9udC13ZWlnaHRcIjoxLFwibGluZS1oZWlnaHRcIjoxLG9wYWNpdHk6MSxcInotaW5kZXhcIjoxLHpvb206MX0sbT0vXlxccyo8KFxcdyt8ISlbXj5dKj4vLG49LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2lnLG89L14oPzpib2R5fGh0bWwpJC9pLHA9W1widmFsXCIsXCJjc3NcIixcImh0bWxcIixcInRleHRcIixcImRhdGFcIixcIndpZHRoXCIsXCJoZWlnaHRcIixcIm9mZnNldFwiXSxxPVtcImFmdGVyXCIsXCJwcmVwZW5kXCIsXCJiZWZvcmVcIixcImFwcGVuZFwiXSxyPWguY3JlYXRlRWxlbWVudChcInRhYmxlXCIpLHM9aC5jcmVhdGVFbGVtZW50KFwidHJcIiksdD17dHI6aC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIiksdGJvZHk6cix0aGVhZDpyLHRmb290OnIsdGQ6cyx0aDpzLFwiKlwiOmguY3JlYXRlRWxlbWVudChcImRpdlwiKX0sdT0vY29tcGxldGV8bG9hZGVkfGludGVyYWN0aXZlLyx2PS9eXFwuKFtcXHctXSspJC8sdz0vXiMoW1xcdy1dKikkLyx4PS9eW1xcdy1dKyQvLHk9e30sej15LnRvU3RyaW5nLEE9e30sQixDLEQ9aC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBBLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtpZighYXx8YS5ub2RlVHlwZSE9PTEpcmV0dXJuITE7dmFyIGM9YS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGEubW96TWF0Y2hlc1NlbGVjdG9yfHxhLm9NYXRjaGVzU2VsZWN0b3J8fGEubWF0Y2hlc1NlbGVjdG9yO2lmKGMpcmV0dXJuIGMuY2FsbChhLGIpO3ZhciBkLGU9YS5wYXJlbnROb2RlLGY9IWU7cmV0dXJuIGYmJihlPUQpLmFwcGVuZENoaWxkKGEpLGQ9fkEucXNhKGUsYikuaW5kZXhPZihhKSxmJiZELnJlbW92ZUNoaWxkKGEpLGR9LEI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvLSsoLik/L2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9iLnRvVXBwZXJDYXNlKCk6XCJcIn0pfSxDPWZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYSxmdW5jdGlvbihiLGMpe3JldHVybiBhLmluZGV4T2YoYik9PWN9KX0sQS5mcmFnbWVudD1mdW5jdGlvbihiLGQsZSl7Yi5yZXBsYWNlJiYoYj1iLnJlcGxhY2UobixcIjwkMT48LyQyPlwiKSksZD09PWEmJihkPW0udGVzdChiKSYmUmVnRXhwLiQxKSxkIGluIHR8fChkPVwiKlwiKTt2YXIgZyxoLGk9dFtkXTtyZXR1cm4gaS5pbm5lckhUTUw9XCJcIitiLGg9Yy5lYWNoKGYuY2FsbChpLmNoaWxkTm9kZXMpLGZ1bmN0aW9uKCl7aS5yZW1vdmVDaGlsZCh0aGlzKX0pLEooZSkmJihnPWMoaCksYy5lYWNoKGUsZnVuY3Rpb24oYSxiKXtwLmluZGV4T2YoYSk+LTE/Z1thXShiKTpnLmF0dHIoYSxiKX0pKSxofSxBLlo9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1hfHxbXSxhLl9fcHJvdG9fXz1jLmZuLGEuc2VsZWN0b3I9Ynx8XCJcIixhfSxBLmlzWj1mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEEuWn0sQS5pbml0PWZ1bmN0aW9uKGIsZCl7aWYoIWIpcmV0dXJuIEEuWigpO2lmKEYoYikpcmV0dXJuIGMoaCkucmVhZHkoYik7aWYoQS5pc1ooYikpcmV0dXJuIGI7dmFyIGU7aWYoSyhiKSllPU0oYik7ZWxzZSBpZihJKGIpKWU9W0ooYik/Yy5leHRlbmQoe30sYik6Yl0sYj1udWxsO2Vsc2UgaWYobS50ZXN0KGIpKWU9QS5mcmFnbWVudChiLnRyaW0oKSxSZWdFeHAuJDEsZCksYj1udWxsO2Vsc2V7aWYoZCE9PWEpcmV0dXJuIGMoZCkuZmluZChiKTtlPUEucXNhKGgsYil9cmV0dXJuIEEuWihlLGIpfSxjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEEuaW5pdChhLGIpfSxjLmV4dGVuZD1mdW5jdGlvbihhKXt2YXIgYixjPWYuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHR5cGVvZiBhPT1cImJvb2xlYW5cIiYmKGI9YSxhPWMuc2hpZnQoKSksYy5mb3JFYWNoKGZ1bmN0aW9uKGMpe1QoYSxjLGIpfSksYX0sQS5xc2E9ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gSChhKSYmdy50ZXN0KGIpPyhjPWEuZ2V0RWxlbWVudEJ5SWQoUmVnRXhwLiQxKSk/W2NdOltdOmEubm9kZVR5cGUhPT0xJiZhLm5vZGVUeXBlIT09OT9bXTpmLmNhbGwodi50ZXN0KGIpP2EuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShSZWdFeHAuJDEpOngudGVzdChiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOmEucXVlcnlTZWxlY3RvckFsbChiKSl9LGMuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9PWImJmEuY29udGFpbnMoYil9LGMudHlwZT1FLGMuaXNGdW5jdGlvbj1GLGMuaXNXaW5kb3c9RyxjLmlzQXJyYXk9SyxjLmlzUGxhaW5PYmplY3Q9SixjLmlzRW1wdHlPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5pbkFycmF5PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZS5pbmRleE9mLmNhbGwoYixhLGMpfSxjLmNhbWVsQ2FzZT1CLGMudHJpbT1mdW5jdGlvbihhKXtyZXR1cm4gYS50cmltKCl9LGMudXVpZD0wLGMuc3VwcG9ydD17fSxjLmV4cHI9e30sYy5tYXA9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGUsZjtpZihMKGEpKWZvcihlPTA7ZTxhLmxlbmd0aDtlKyspYz1iKGFbZV0sZSksYyE9bnVsbCYmZC5wdXNoKGMpO2Vsc2UgZm9yKGYgaW4gYSljPWIoYVtmXSxmKSxjIT1udWxsJiZkLnB1c2goYyk7cmV0dXJuIE4oZCl9LGMuZWFjaD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoTChhKSl7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKylpZihiLmNhbGwoYVtjXSxjLGFbY10pPT09ITEpcmV0dXJuIGF9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlyZXR1cm4gYTtyZXR1cm4gYX0sYy5ncmVwPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGcuY2FsbChhLGIpfSx3aW5kb3cuSlNPTiYmKGMucGFyc2VKU09OPUpTT04ucGFyc2UpLGMuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXt5W1wiW29iamVjdCBcIitiK1wiXVwiXT1iLnRvTG93ZXJDYXNlKCl9KSxjLmZuPXtmb3JFYWNoOmUuZm9yRWFjaCxyZWR1Y2U6ZS5yZWR1Y2UscHVzaDplLnB1c2gsc29ydDplLnNvcnQsaW5kZXhPZjplLmluZGV4T2YsY29uY2F0OmUuY29uY2F0LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gYyhjLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIGMoZi5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxyZWFkeTpmdW5jdGlvbihhKXtyZXR1cm4gdS50ZXN0KGgucmVhZHlTdGF0ZSk/YShjKTpoLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXthKGMpfSwhMSksdGhpc30sZ2V0OmZ1bmN0aW9uKGIpe3JldHVybiBiPT09YT9mLmNhbGwodGhpcyk6dGhpc1tiPj0wP2I6Yit0aGlzLmxlbmd0aF19LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoKX0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZSE9bnVsbCYmdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpfSl9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuZXZlcnkuY2FsbCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYikhPT0hMX0pLHRoaXN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gRihhKT90aGlzLm5vdCh0aGlzLm5vdChhKSk6YyhnLmNhbGwodGhpcyxmdW5jdGlvbihiKXtyZXR1cm4gQS5tYXRjaGVzKGIsYSl9KSl9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiBjKEModGhpcy5jb25jYXQoYyhhLGIpKSkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sZW5ndGg+MCYmQS5tYXRjaGVzKHRoaXNbMF0sYSl9LG5vdDpmdW5jdGlvbihiKXt2YXIgZD1bXTtpZihGKGIpJiZiLmNhbGwhPT1hKXRoaXMuZWFjaChmdW5jdGlvbihhKXtiLmNhbGwodGhpcyxhKXx8ZC5wdXNoKHRoaXMpfSk7ZWxzZXt2YXIgZT10eXBlb2YgYj09XCJzdHJpbmdcIj90aGlzLmZpbHRlcihiKTpMKGIpJiZGKGIuaXRlbSk/Zi5jYWxsKGIpOmMoYik7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UuaW5kZXhPZihhKTwwJiZkLnB1c2goYSl9KX1yZXR1cm4gYyhkKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBJKGEpP2MuY29udGFpbnModGhpcyxhKTpjKHRoaXMpLmZpbmQoYSkuc2l6ZSgpfSl9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09LTE/dGhpcy5zbGljZShhKTp0aGlzLnNsaWNlKGEsK2ErMSl9LGZpcnN0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1swXTtyZXR1cm4gYSYmIUkoYSk/YTpjKGEpfSxsYXN0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1t0aGlzLmxlbmd0aC0xXTtyZXR1cm4gYSYmIUkoYSk/YTpjKGEpfSxmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGQ9dGhpcztyZXR1cm4gdHlwZW9mIGE9PVwib2JqZWN0XCI/Yj1jKGEpLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGUuc29tZS5jYWxsKGQsZnVuY3Rpb24oYil7cmV0dXJuIGMuY29udGFpbnMoYixhKX0pfSk6dGhpcy5sZW5ndGg9PTE/Yj1jKEEucXNhKHRoaXNbMF0sYSkpOmI9dGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQS5xc2EodGhpcyxhKX0pLGJ9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzWzBdLGU9ITE7dHlwZW9mIGE9PVwib2JqZWN0XCImJihlPWMoYSkpO3doaWxlKGQmJiEoZT9lLmluZGV4T2YoZCk+PTA6QS5tYXRjaGVzKGQsYSkpKWQ9ZCE9PWImJiFIKGQpJiZkLnBhcmVudE5vZGU7cmV0dXJuIGMoZCl9LHBhcmVudHM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sZD10aGlzO3doaWxlKGQubGVuZ3RoPjApZD1jLm1hcChkLGZ1bmN0aW9uKGEpe2lmKChhPWEucGFyZW50Tm9kZSkmJiFIKGEpJiZiLmluZGV4T2YoYSk8MClyZXR1cm4gYi5wdXNoKGEpLGF9KTtyZXR1cm4gVShiLGEpfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFUoQyh0aGlzLnBsdWNrKFwicGFyZW50Tm9kZVwiKSksYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBVKHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFModGhpcyl9KSxhKX0sY29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMuY2hpbGROb2Rlcyl9KX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIFUodGhpcy5tYXAoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZy5jYWxsKFMoYi5wYXJlbnROb2RlKSxmdW5jdGlvbihhKXtyZXR1cm4gYSE9PWJ9KX0pLGEpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD1cIlwifSl9LHBsdWNrOmZ1bmN0aW9uKGEpe3JldHVybiBjLm1hcCh0aGlzLGZ1bmN0aW9uKGIpe3JldHVybiBiW2FdfSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PT1cIm5vbmVcIiYmKHRoaXMuc3R5bGUuZGlzcGxheT1udWxsKSxrKHRoaXMsXCJcIikuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIik9PVwibm9uZVwiJiYodGhpcy5zdHlsZS5kaXNwbGF5PVIodGhpcy5ub2RlTmFtZSkpfSl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJlZm9yZShhKS5yZW1vdmUoKX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1GKGEpO2lmKHRoaXNbMF0mJiFiKXZhciBkPWMoYSkuZ2V0KDApLGU9ZC5wYXJlbnROb2RlfHx0aGlzLmxlbmd0aD4xO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZil7Yyh0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsZik6ZT9kLmNsb25lTm9kZSghMCk6ZCl9KX0sd3JhcEFsbDpmdW5jdGlvbihhKXtpZih0aGlzWzBdKXtjKHRoaXNbMF0pLmJlZm9yZShhPWMoYSkpO3ZhciBiO3doaWxlKChiPWEuY2hpbGRyZW4oKSkubGVuZ3RoKWE9Yi5maXJzdCgpO2MoYSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7dmFyIGI9RihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGQpe3ZhciBlPWModGhpcyksZj1lLmNvbnRlbnRzKCksZz1iP2EuY2FsbCh0aGlzLGQpOmE7Zi5sZW5ndGg/Zi53cmFwQWxsKGcpOmUuYXBwZW5kKGcpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMpLnJlcGxhY2VXaXRoKGModGhpcykuY2hpbGRyZW4oKSl9KSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lTm9kZSghMCl9KX0saGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIil9LHRvZ2dsZTpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9Yyh0aGlzKTsoYj09PWE/ZC5jc3MoXCJkaXNwbGF5XCIpPT1cIm5vbmVcIjpiKT9kLnNob3coKTpkLmhpZGUoKX0pfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMucGx1Y2soXCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nXCIpKS5maWx0ZXIoYXx8XCIqXCIpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMucGx1Y2soXCJuZXh0RWxlbWVudFNpYmxpbmdcIikpLmZpbHRlcihhfHxcIipcIil9LGh0bWw6ZnVuY3Rpb24oYil7cmV0dXJuIGI9PT1hP3RoaXMubGVuZ3RoPjA/dGhpc1swXS5pbm5lckhUTUw6bnVsbDp0aGlzLmVhY2goZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5pbm5lckhUTUw7Yyh0aGlzKS5lbXB0eSgpLmFwcGVuZChWKHRoaXMsYixhLGQpKX0pfSx0ZXh0OmZ1bmN0aW9uKGIpe3JldHVybiBiPT09YT90aGlzLmxlbmd0aD4wP3RoaXNbMF0udGV4dENvbnRlbnQ6bnVsbDp0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50PWJ9KX0sYXR0cjpmdW5jdGlvbihjLGQpe3ZhciBlO3JldHVybiB0eXBlb2YgYz09XCJzdHJpbmdcIiYmZD09PWE/dGhpcy5sZW5ndGg9PTB8fHRoaXNbMF0ubm9kZVR5cGUhPT0xP2E6Yz09XCJ2YWx1ZVwiJiZ0aGlzWzBdLm5vZGVOYW1lPT1cIklOUFVUXCI/dGhpcy52YWwoKTohKGU9dGhpc1swXS5nZXRBdHRyaWJ1dGUoYykpJiZjIGluIHRoaXNbMF0/dGhpc1swXVtjXTplOnRoaXMuZWFjaChmdW5jdGlvbihhKXtpZih0aGlzLm5vZGVUeXBlIT09MSlyZXR1cm47aWYoSShjKSlmb3IoYiBpbiBjKVcodGhpcyxiLGNbYl0pO2Vsc2UgVyh0aGlzLGMsVih0aGlzLGQsYSx0aGlzLmdldEF0dHJpYnV0ZShjKSkpfSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMubm9kZVR5cGU9PT0xJiZXKHRoaXMsYSl9KX0scHJvcDpmdW5jdGlvbihiLGMpe3JldHVybiBjPT09YT90aGlzWzBdJiZ0aGlzWzBdW2JdOnRoaXMuZWFjaChmdW5jdGlvbihhKXt0aGlzW2JdPVYodGhpcyxjLGEsdGhpc1tiXSl9KX0sZGF0YTpmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuYXR0cihcImRhdGEtXCIrTyhiKSxjKTtyZXR1cm4gZCE9PW51bGw/WShkKTphfSx2YWw6ZnVuY3Rpb24oYil7cmV0dXJuIGI9PT1hP3RoaXNbMF0mJih0aGlzWzBdLm11bHRpcGxlP2ModGhpc1swXSkuZmluZChcIm9wdGlvblwiKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2VsZWN0ZWR9KS5wbHVjayhcInZhbHVlXCIpOnRoaXNbMF0udmFsdWUpOnRoaXMuZWFjaChmdW5jdGlvbihhKXt0aGlzLnZhbHVlPVYodGhpcyxiLGEsdGhpcy52YWx1ZSl9KX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXt2YXIgZD1jKHRoaXMpLGU9Vih0aGlzLGEsYixkLm9mZnNldCgpKSxmPWQub2Zmc2V0UGFyZW50KCkub2Zmc2V0KCksZz17dG9wOmUudG9wLWYudG9wLGxlZnQ6ZS5sZWZ0LWYubGVmdH07ZC5jc3MoXCJwb3NpdGlvblwiKT09XCJzdGF0aWNcIiYmKGcucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxkLmNzcyhnKX0pO2lmKHRoaXMubGVuZ3RoPT0wKXJldHVybiBudWxsO3ZhciBiPXRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue2xlZnQ6Yi5sZWZ0K3dpbmRvdy5wYWdlWE9mZnNldCx0b3A6Yi50b3Ard2luZG93LnBhZ2VZT2Zmc2V0LHdpZHRoOk1hdGgucm91bmQoYi53aWR0aCksaGVpZ2h0Ok1hdGgucm91bmQoYi5oZWlnaHQpfX0sY3NzOmZ1bmN0aW9uKGEsYyl7aWYoYXJndW1lbnRzLmxlbmd0aDwyJiZ0eXBlb2YgYT09XCJzdHJpbmdcIilyZXR1cm4gdGhpc1swXSYmKHRoaXNbMF0uc3R5bGVbQihhKV18fGsodGhpc1swXSxcIlwiKS5nZXRQcm9wZXJ0eVZhbHVlKGEpKTt2YXIgZD1cIlwiO2lmKEUoYSk9PVwic3RyaW5nXCIpIWMmJmMhPT0wP3RoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoTyhhKSl9KTpkPU8oYSkrXCI6XCIrUShhLGMpO2Vsc2UgZm9yKGIgaW4gYSkhYVtiXSYmYVtiXSE9PTA/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShPKGIpKX0pOmQrPU8oYikrXCI6XCIrUShiLGFbYl0pK1wiO1wiO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmNzc1RleHQrPVwiO1wiK2R9KX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5pbmRleE9mKGMoYSlbMF0pOnRoaXMucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleE9mKHRoaXNbMF0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gZS5zb21lLmNhbGwodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50ZXN0KFgoYSkpfSxQKGEpKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtkPVtdO3ZhciBlPVgodGhpcyksZj1WKHRoaXMsYSxiLGUpO2Yuc3BsaXQoL1xccysvZykuZm9yRWFjaChmdW5jdGlvbihhKXtjKHRoaXMpLmhhc0NsYXNzKGEpfHxkLnB1c2goYSl9LHRoaXMpLGQubGVuZ3RoJiZYKHRoaXMsZSsoZT9cIiBcIjpcIlwiKStkLmpvaW4oXCIgXCIpKX0pfSxyZW1vdmVDbGFzczpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe2lmKGI9PT1hKXJldHVybiBYKHRoaXMsXCJcIik7ZD1YKHRoaXMpLFYodGhpcyxiLGMsZCkuc3BsaXQoL1xccysvZykuZm9yRWFjaChmdW5jdGlvbihhKXtkPWQucmVwbGFjZShQKGEpLFwiIFwiKX0pLFgodGhpcyxkLnRyaW0oKSl9KX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYixkKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWModGhpcyksZz1WKHRoaXMsYixlLFgodGhpcykpO2cuc3BsaXQoL1xccysvZykuZm9yRWFjaChmdW5jdGlvbihiKXsoZD09PWE/IWYuaGFzQ2xhc3MoYik6ZCk/Zi5hZGRDbGFzcyhiKTpmLnJlbW92ZUNsYXNzKGIpfSl9KX0sc2Nyb2xsVG9wOmZ1bmN0aW9uKCl7aWYoIXRoaXMubGVuZ3RoKXJldHVybjtyZXR1cm5cInNjcm9sbFRvcFwiaW4gdGhpc1swXT90aGlzWzBdLnNjcm9sbFRvcDp0aGlzWzBdLnNjcm9sbFl9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMubGVuZ3RoKXJldHVybjt2YXIgYT10aGlzWzBdLGI9dGhpcy5vZmZzZXRQYXJlbnQoKSxkPXRoaXMub2Zmc2V0KCksZT1vLnRlc3QoYlswXS5ub2RlTmFtZSk/e3RvcDowLGxlZnQ6MH06Yi5vZmZzZXQoKTtyZXR1cm4gZC50b3AtPXBhcnNlRmxvYXQoYyhhKS5jc3MoXCJtYXJnaW4tdG9wXCIpKXx8MCxkLmxlZnQtPXBhcnNlRmxvYXQoYyhhKS5jc3MoXCJtYXJnaW4tbGVmdFwiKSl8fDAsZS50b3ArPXBhcnNlRmxvYXQoYyhiWzBdKS5jc3MoXCJib3JkZXItdG9wLXdpZHRoXCIpKXx8MCxlLmxlZnQrPXBhcnNlRmxvYXQoYyhiWzBdKS5jc3MoXCJib3JkZXItbGVmdC13aWR0aFwiKSl8fDAse3RvcDpkLnRvcC1lLnRvcCxsZWZ0OmQubGVmdC1lLmxlZnR9fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8aC5ib2R5O3doaWxlKGEmJiFvLnRlc3QoYS5ub2RlTmFtZSkmJmMoYSkuY3NzKFwicG9zaXRpb25cIik9PVwic3RhdGljXCIpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYX0pfX0sYy5mbi5kZXRhY2g9Yy5mbi5yZW1vdmUsW1wid2lkdGhcIixcImhlaWdodFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2MuZm5bYl09ZnVuY3Rpb24oZCl7dmFyIGUsZj10aGlzWzBdLGc9Yi5yZXBsYWNlKC8uLyxmdW5jdGlvbihhKXtyZXR1cm4gYVswXS50b1VwcGVyQ2FzZSgpfSk7cmV0dXJuIGQ9PT1hP0coZik/ZltcImlubmVyXCIrZ106SChmKT9mLmRvY3VtZW50RWxlbWVudFtcIm9mZnNldFwiK2ddOihlPXRoaXMub2Zmc2V0KCkpJiZlW2JdOnRoaXMuZWFjaChmdW5jdGlvbihhKXtmPWModGhpcyksZi5jc3MoYixWKHRoaXMsZCxhLGZbYl0oKSkpfSl9fSkscS5mb3JFYWNoKGZ1bmN0aW9uKGEsYil7dmFyIGQ9YiUyO2MuZm5bYV09ZnVuY3Rpb24oKXt2YXIgYSxlPWMubWFwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXtyZXR1cm4gYT1FKGIpLGE9PVwib2JqZWN0XCJ8fGE9PVwiYXJyYXlcInx8Yj09bnVsbD9iOkEuZnJhZ21lbnQoYil9KSxmLGc9dGhpcy5sZW5ndGg+MTtyZXR1cm4gZS5sZW5ndGg8MT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihhLGgpe2Y9ZD9oOmgucGFyZW50Tm9kZSxoPWI9PTA/aC5uZXh0U2libGluZzpiPT0xP2guZmlyc3RDaGlsZDpiPT0yP2g6bnVsbCxlLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoZylhPWEuY2xvbmVOb2RlKCEwKTtlbHNlIGlmKCFmKXJldHVybiBjKGEpLnJlbW92ZSgpO1ooZi5pbnNlcnRCZWZvcmUoYSxoKSxmdW5jdGlvbihhKXthLm5vZGVOYW1lIT1udWxsJiZhLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT1cIlNDUklQVFwiJiYoIWEudHlwZXx8YS50eXBlPT09XCJ0ZXh0L2phdmFzY3JpcHRcIikmJiFhLnNyYyYmd2luZG93LmV2YWwuY2FsbCh3aW5kb3csYS5pbm5lckhUTUwpfSl9KX0pfSxjLmZuW2Q/YStcIlRvXCI6XCJpbnNlcnRcIisoYj9cIkJlZm9yZVwiOlwiQWZ0ZXJcIildPWZ1bmN0aW9uKGIpe3JldHVybiBjKGIpW2FdKHRoaXMpLHRoaXN9fSksQS5aLnByb3RvdHlwZT1jLmZuLEEudW5pcT1DLEEuZGVzZXJpYWxpemVWYWx1ZT1ZLGMuemVwdG89QSxjfSgpO3dpbmRvdy5aZXB0bz1aZXB0byxcIiRcImluIHdpbmRvd3x8KHdpbmRvdy4kPVplcHRvKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPXRoaXMub3M9e30sYz10aGlzLmJyb3dzZXI9e30sZD1hLm1hdGNoKC9XZWJLaXRcXC8oW1xcZC5dKykvKSxlPWEubWF0Y2goLyhBbmRyb2lkKVxccysoW1xcZC5dKykvKSxmPWEubWF0Y2goLyhpUGFkKS4qT1NcXHMoW1xcZF9dKykvKSxnPSFmJiZhLm1hdGNoKC8oaVBob25lXFxzT1MpXFxzKFtcXGRfXSspLyksaD1hLm1hdGNoKC8od2ViT1N8aHB3T1MpW1xcc1xcL10oW1xcZC5dKykvKSxpPWgmJmEubWF0Y2goL1RvdWNoUGFkLyksaj1hLm1hdGNoKC9LaW5kbGVcXC8oW1xcZC5dKykvKSxrPWEubWF0Y2goL1NpbGtcXC8oW1xcZC5fXSspLyksbD1hLm1hdGNoKC8oQmxhY2tCZXJyeSkuKlZlcnNpb25cXC8oW1xcZC5dKykvKSxtPWEubWF0Y2goLyhCQjEwKS4qVmVyc2lvblxcLyhbXFxkLl0rKS8pLG49YS5tYXRjaCgvKFJJTVxcc1RhYmxldFxcc09TKVxccyhbXFxkLl0rKS8pLG89YS5tYXRjaCgvUGxheUJvb2svKSxwPWEubWF0Y2goL0Nocm9tZVxcLyhbXFxkLl0rKS8pfHxhLm1hdGNoKC9DcmlPU1xcLyhbXFxkLl0rKS8pLHE9YS5tYXRjaCgvRmlyZWZveFxcLyhbXFxkLl0rKS8pO2lmKGMud2Via2l0PSEhZCljLnZlcnNpb249ZFsxXTtlJiYoYi5hbmRyb2lkPSEwLGIudmVyc2lvbj1lWzJdKSxnJiYoYi5pb3M9Yi5pcGhvbmU9ITAsYi52ZXJzaW9uPWdbMl0ucmVwbGFjZSgvXy9nLFwiLlwiKSksZiYmKGIuaW9zPWIuaXBhZD0hMCxiLnZlcnNpb249ZlsyXS5yZXBsYWNlKC9fL2csXCIuXCIpKSxoJiYoYi53ZWJvcz0hMCxiLnZlcnNpb249aFsyXSksaSYmKGIudG91Y2hwYWQ9ITApLGwmJihiLmJsYWNrYmVycnk9ITAsYi52ZXJzaW9uPWxbMl0pLG0mJihiLmJiMTA9ITAsYi52ZXJzaW9uPW1bMl0pLG4mJihiLnJpbXRhYmxldG9zPSEwLGIudmVyc2lvbj1uWzJdKSxvJiYoYy5wbGF5Ym9vaz0hMCksaiYmKGIua2luZGxlPSEwLGIudmVyc2lvbj1qWzFdKSxrJiYoYy5zaWxrPSEwLGMudmVyc2lvbj1rWzFdKSwhayYmYi5hbmRyb2lkJiZhLm1hdGNoKC9LaW5kbGUgRmlyZS8pJiYoYy5zaWxrPSEwKSxwJiYoYy5jaHJvbWU9ITAsYy52ZXJzaW9uPXBbMV0pLHEmJihjLmZpcmVmb3g9ITAsYy52ZXJzaW9uPXFbMV0pLGIudGFibGV0PSEhKGZ8fG98fGUmJiFhLm1hdGNoKC9Nb2JpbGUvKXx8cSYmYS5tYXRjaCgvVGFibGV0LykpLGIucGhvbmU9IWIudGFibGV0JiYhIShlfHxnfHxofHxsfHxtfHxwJiZhLm1hdGNoKC9BbmRyb2lkLyl8fHAmJmEubWF0Y2goL0NyaU9TXFwvKFtcXGQuXSspLyl8fHEmJmEubWF0Y2goL01vYmlsZS8pKX1iLmNhbGwoYSxuYXZpZ2F0b3IudXNlckFnZW50KSxhLl9fZGV0ZWN0PWJ9KFplcHRvKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBnKGEpe3JldHVybiBhLl96aWR8fChhLl96aWQ9ZCsrKX1mdW5jdGlvbiBoKGEsYixkLGUpe2I9aShiKTtpZihiLm5zKXZhciBmPWooYi5ucyk7cmV0dXJuKGNbZyhhKV18fFtdKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEmJighYi5lfHxhLmU9PWIuZSkmJighYi5uc3x8Zi50ZXN0KGEubnMpKSYmKCFkfHxnKGEuZm4pPT09ZyhkKSkmJighZXx8YS5zZWw9PWUpfSl9ZnVuY3Rpb24gaShhKXt2YXIgYj0oXCJcIithKS5zcGxpdChcIi5cIik7cmV0dXJue2U6YlswXSxuczpiLnNsaWNlKDEpLnNvcnQoKS5qb2luKFwiIFwiKX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58IClcIithLnJlcGxhY2UoXCIgXCIsXCIgLiogP1wiKStcIig/OiB8JClcIil9ZnVuY3Rpb24gayhiLGMsZCl7YS50eXBlKGIpIT1cInN0cmluZ1wiP2EuZWFjaChiLGQpOmIuc3BsaXQoL1xccy8pLmZvckVhY2goZnVuY3Rpb24oYSl7ZChhLGMpfSl9ZnVuY3Rpb24gbChhLGIpe3JldHVybiBhLmRlbCYmKGEuZT09XCJmb2N1c1wifHxhLmU9PVwiYmx1clwiKXx8ISFifWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGZbYV18fGF9ZnVuY3Rpb24gbihiLGQsZSxoLGosbil7dmFyIG89ZyhiKSxwPWNbb118fChjW29dPVtdKTtrKGQsZSxmdW5jdGlvbihjLGQpe3ZhciBlPWkoYyk7ZS5mbj1kLGUuc2VsPWgsZS5lIGluIGYmJihkPWZ1bmN0aW9uKGIpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtpZighY3x8YyE9PXRoaXMmJiFhLmNvbnRhaW5zKHRoaXMsYykpcmV0dXJuIGUuZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5kZWw9aiYmaihkLGMpO3ZhciBnPWUuZGVsfHxkO2UucHJveHk9ZnVuY3Rpb24oYSl7dmFyIGM9Zy5hcHBseShiLFthXS5jb25jYXQoYS5kYXRhKSk7cmV0dXJuIGM9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSxjfSxlLmk9cC5sZW5ndGgscC5wdXNoKGUpLGIuYWRkRXZlbnRMaXN0ZW5lcihtKGUuZSksZS5wcm94eSxsKGUsbikpfSl9ZnVuY3Rpb24gbyhhLGIsZCxlLGYpe3ZhciBpPWcoYSk7ayhifHxcIlwiLGQsZnVuY3Rpb24oYixkKXtoKGEsYixkLGUpLmZvckVhY2goZnVuY3Rpb24oYil7ZGVsZXRlIGNbaV1bYi5pXSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIobShiLmUpLGIucHJveHksbChiLGYpKX0pfSl9ZnVuY3Rpb24gdChiKXt2YXIgYyxkPXtvcmlnaW5hbEV2ZW50OmJ9O2ZvcihjIGluIGIpIXIudGVzdChjKSYmYltjXSE9PXVuZGVmaW5lZCYmKGRbY109YltjXSk7cmV0dXJuIGEuZWFjaChzLGZ1bmN0aW9uKGEsYyl7ZFthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzW2NdPXAsYlthXS5hcHBseShiLGFyZ3VtZW50cyl9LGRbY109cX0pLGR9ZnVuY3Rpb24gdShhKXtpZighKFwiZGVmYXVsdFByZXZlbnRlZFwiaW4gYSkpe2EuZGVmYXVsdFByZXZlbnRlZD0hMTt2YXIgYj1hLnByZXZlbnREZWZhdWx0O2EucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITAsYi5jYWxsKHRoaXMpfX19dmFyIGI9YS56ZXB0by5xc2EsYz17fSxkPTEsZT17fSxmPXttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCJ9O2UuY2xpY2s9ZS5tb3VzZWRvd249ZS5tb3VzZXVwPWUubW91c2Vtb3ZlPVwiTW91c2VFdmVudHNcIixhLmV2ZW50PXthZGQ6bixyZW1vdmU6b30sYS5wcm94eT1mdW5jdGlvbihiLGMpe2lmKGEuaXNGdW5jdGlvbihiKSl7dmFyIGQ9ZnVuY3Rpb24oKXtyZXR1cm4gYi5hcHBseShjLGFyZ3VtZW50cyl9O3JldHVybiBkLl96aWQ9ZyhiKSxkfWlmKHR5cGVvZiBjPT1cInN0cmluZ1wiKXJldHVybiBhLnByb3h5KGJbY10sYik7dGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGVkIGZ1bmN0aW9uXCIpfSxhLmZuLmJpbmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bih0aGlzLGEsYil9KX0sYS5mbi51bmJpbmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7byh0aGlzLGEsYil9KX0sYS5mbi5vbmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMsZCl7bih0aGlzLGEsYixudWxsLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9YS5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIG8oZCxiLGEpLGN9fSl9KX07dmFyIHA9ZnVuY3Rpb24oKXtyZXR1cm4hMH0scT1mdW5jdGlvbigpe3JldHVybiExfSxyPS9eKFtBLVpdfGxheWVyW1hZXSQpLyxzPXtwcmV2ZW50RGVmYXVsdDpcImlzRGVmYXVsdFByZXZlbnRlZFwiLHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpcImlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkXCIsc3RvcFByb3BhZ2F0aW9uOlwiaXNQcm9wYWdhdGlvblN0b3BwZWRcIn07YS5mbi5kZWxlZ2F0ZT1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlLGYpe24oZixjLGQsYixmdW5jdGlvbihjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGUsZz1hKGQudGFyZ2V0KS5jbG9zZXN0KGIsZikuZ2V0KDApO2lmKGcpcmV0dXJuIGU9YS5leHRlbmQodChkKSx7Y3VycmVudFRhcmdldDpnLGxpdmVGaXJlZDpmfSksYy5hcHBseShnLFtlXS5jb25jYXQoW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpKX19KX0pfSxhLmZuLnVuZGVsZWdhdGU9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtvKHRoaXMsYixjLGEpfSl9LGEuZm4ubGl2ZT1mdW5jdGlvbihiLGMpe3JldHVybiBhKGRvY3VtZW50LmJvZHkpLmRlbGVnYXRlKHRoaXMuc2VsZWN0b3IsYixjKSx0aGlzfSxhLmZuLmRpZT1mdW5jdGlvbihiLGMpe3JldHVybiBhKGRvY3VtZW50LmJvZHkpLnVuZGVsZWdhdGUodGhpcy5zZWxlY3RvcixiLGMpLHRoaXN9LGEuZm4ub249ZnVuY3Rpb24oYixjLGQpe3JldHVybiFjfHxhLmlzRnVuY3Rpb24oYyk/dGhpcy5iaW5kKGIsY3x8ZCk6dGhpcy5kZWxlZ2F0ZShjLGIsZCl9LGEuZm4ub2ZmPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4hY3x8YS5pc0Z1bmN0aW9uKGMpP3RoaXMudW5iaW5kKGIsY3x8ZCk6dGhpcy51bmRlbGVnYXRlKGMsYixkKX0sYS5mbi50cmlnZ2VyPWZ1bmN0aW9uKGIsYyl7aWYodHlwZW9mIGI9PVwic3RyaW5nXCJ8fGEuaXNQbGFpbk9iamVjdChiKSliPWEuRXZlbnQoYik7cmV0dXJuIHUoYiksYi5kYXRhPWMsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XCJkaXNwYXRjaEV2ZW50XCJpbiB0aGlzJiZ0aGlzLmRpc3BhdGNoRXZlbnQoYil9KX0sYS5mbi50cmlnZ2VySGFuZGxlcj1mdW5jdGlvbihiLGMpe3ZhciBkLGU7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihmLGcpe2Q9dCh0eXBlb2YgYj09XCJzdHJpbmdcIj9hLkV2ZW50KGIpOmIpLGQuZGF0YT1jLGQudGFyZ2V0PWcsYS5lYWNoKGgoZyxiLnR5cGV8fGIpLGZ1bmN0aW9uKGEsYil7ZT1iLnByb3h5KGQpO2lmKGQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlyZXR1cm4hMX0pfSksZX0sXCJmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yXCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oYil7YS5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLmJpbmQoYixhKTp0aGlzLnRyaWdnZXIoYil9fSksW1wiZm9jdXNcIixcImJsdXJcIl0uZm9yRWFjaChmdW5jdGlvbihiKXthLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuYmluZChiLGEpOnRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2JdKCl9Y2F0Y2goYSl7fX0pLHRoaXN9fSksYS5FdmVudD1mdW5jdGlvbihhLGIpe3R5cGVvZiBhIT1cInN0cmluZ1wiJiYoYj1hLGE9Yi50eXBlKTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudChlW2FdfHxcIkV2ZW50c1wiKSxkPSEwO2lmKGIpZm9yKHZhciBmIGluIGIpZj09XCJidWJibGVzXCI/ZD0hIWJbZl06Y1tmXT1iW2ZdO3JldHVybiBjLmluaXRFdmVudChhLGQsITAsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwpLGMuaXNEZWZhdWx0UHJldmVudGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZH0sY319KFplcHRvKSxmdW5jdGlvbigkKXtmdW5jdGlvbiB0cmlnZ2VyQW5kUmV0dXJuKGEsYixjKXt2YXIgZD0kLkV2ZW50KGIpO3JldHVybiAkKGEpLnRyaWdnZXIoZCxjKSwhZC5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIHRyaWdnZXJHbG9iYWwoYSxiLGMsZCl7aWYoYS5nbG9iYWwpcmV0dXJuIHRyaWdnZXJBbmRSZXR1cm4oYnx8ZG9jdW1lbnQsYyxkKX1mdW5jdGlvbiBhamF4U3RhcnQoYSl7YS5nbG9iYWwmJiQuYWN0aXZlKys9PT0wJiZ0cmlnZ2VyR2xvYmFsKGEsbnVsbCxcImFqYXhTdGFydFwiKX1mdW5jdGlvbiBhamF4U3RvcChhKXthLmdsb2JhbCYmIS0tJC5hY3RpdmUmJnRyaWdnZXJHbG9iYWwoYSxudWxsLFwiYWpheFN0b3BcIil9ZnVuY3Rpb24gYWpheEJlZm9yZVNlbmQoYSxiKXt2YXIgYz1iLmNvbnRleHQ7aWYoYi5iZWZvcmVTZW5kLmNhbGwoYyxhLGIpPT09ITF8fHRyaWdnZXJHbG9iYWwoYixjLFwiYWpheEJlZm9yZVNlbmRcIixbYSxiXSk9PT0hMSlyZXR1cm4hMTt0cmlnZ2VyR2xvYmFsKGIsYyxcImFqYXhTZW5kXCIsW2EsYl0pfWZ1bmN0aW9uIGFqYXhTdWNjZXNzKGEsYixjKXt2YXIgZD1jLmNvbnRleHQsZT1cInN1Y2Nlc3NcIjtjLnN1Y2Nlc3MuY2FsbChkLGEsZSxiKSx0cmlnZ2VyR2xvYmFsKGMsZCxcImFqYXhTdWNjZXNzXCIsW2IsYyxhXSksYWpheENvbXBsZXRlKGUsYixjKX1mdW5jdGlvbiBhamF4RXJyb3IoYSxiLGMsZCl7dmFyIGU9ZC5jb250ZXh0O2QuZXJyb3IuY2FsbChlLGMsYixhKSx0cmlnZ2VyR2xvYmFsKGQsZSxcImFqYXhFcnJvclwiLFtjLGQsYV0pLGFqYXhDb21wbGV0ZShiLGMsZCl9ZnVuY3Rpb24gYWpheENvbXBsZXRlKGEsYixjKXt2YXIgZD1jLmNvbnRleHQ7Yy5jb21wbGV0ZS5jYWxsKGQsYixhKSx0cmlnZ2VyR2xvYmFsKGMsZCxcImFqYXhDb21wbGV0ZVwiLFtiLGNdKSxhamF4U3RvcChjKX1mdW5jdGlvbiBlbXB0eSgpe31mdW5jdGlvbiBtaW1lVG9EYXRhVHlwZShhKXtyZXR1cm4gYSYmKGE9YS5zcGxpdChcIjtcIiwyKVswXSksYSYmKGE9PWh0bWxUeXBlP1wiaHRtbFwiOmE9PWpzb25UeXBlP1wianNvblwiOnNjcmlwdFR5cGVSRS50ZXN0KGEpP1wic2NyaXB0XCI6eG1sVHlwZVJFLnRlc3QoYSkmJlwieG1sXCIpfHxcInRleHRcIn1mdW5jdGlvbiBhcHBlbmRRdWVyeShhLGIpe3JldHVybihhK1wiJlwiK2IpLnJlcGxhY2UoL1smP117MSwyfS8sXCI/XCIpfWZ1bmN0aW9uIHNlcmlhbGl6ZURhdGEoYSl7YS5wcm9jZXNzRGF0YSYmYS5kYXRhJiYkLnR5cGUoYS5kYXRhKSE9XCJzdHJpbmdcIiYmKGEuZGF0YT0kLnBhcmFtKGEuZGF0YSxhLnRyYWRpdGlvbmFsKSksYS5kYXRhJiYoIWEudHlwZXx8YS50eXBlLnRvVXBwZXJDYXNlKCk9PVwiR0VUXCIpJiYoYS51cmw9YXBwZW5kUXVlcnkoYS51cmwsYS5kYXRhKSl9ZnVuY3Rpb24gcGFyc2VBcmd1bWVudHMoYSxiLGMsZCl7dmFyIGU9ISQuaXNGdW5jdGlvbihiKTtyZXR1cm57dXJsOmEsZGF0YTplP2I6dW5kZWZpbmVkLHN1Y2Nlc3M6ZT8kLmlzRnVuY3Rpb24oYyk/Yzp1bmRlZmluZWQ6YixkYXRhVHlwZTplP2R8fGM6Y319ZnVuY3Rpb24gc2VyaWFsaXplKGEsYixjLGQpe3ZhciBlLGY9JC5pc0FycmF5KGIpOyQuZWFjaChiLGZ1bmN0aW9uKGIsZyl7ZT0kLnR5cGUoZyksZCYmKGI9Yz9kOmQrXCJbXCIrKGY/XCJcIjpiKStcIl1cIiksIWQmJmY/YS5hZGQoZy5uYW1lLGcudmFsdWUpOmU9PVwiYXJyYXlcInx8IWMmJmU9PVwib2JqZWN0XCI/c2VyaWFsaXplKGEsZyxjLGIpOmEuYWRkKGIsZyl9KX12YXIganNvbnBJRD0wLGRvY3VtZW50PXdpbmRvdy5kb2N1bWVudCxrZXksbmFtZSxyc2NyaXB0PS88c2NyaXB0XFxiW148XSooPzooPyE8XFwvc2NyaXB0Pik8W148XSopKjxcXC9zY3JpcHQ+L2dpLHNjcmlwdFR5cGVSRT0vXig/OnRleHR8YXBwbGljYXRpb24pXFwvamF2YXNjcmlwdC9pLHhtbFR5cGVSRT0vXig/OnRleHR8YXBwbGljYXRpb24pXFwveG1sL2ksanNvblR5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIsaHRtbFR5cGU9XCJ0ZXh0L2h0bWxcIixibGFua1JFPS9eXFxzKiQvOyQuYWN0aXZlPTAsJC5hamF4SlNPTlA9ZnVuY3Rpb24oYSl7aWYoXCJ0eXBlXCJpbiBhKXt2YXIgYj1cImpzb25wXCIrICsranNvbnBJRCxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksZD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChnKSwkKGMpLnJlbW92ZSgpLGRlbGV0ZSB3aW5kb3dbYl19LGU9ZnVuY3Rpb24oYyl7ZCgpO2lmKCFjfHxjPT1cInRpbWVvdXRcIil3aW5kb3dbYl09ZW1wdHk7YWpheEVycm9yKG51bGwsY3x8XCJhYm9ydFwiLGYsYSl9LGY9e2Fib3J0OmV9LGc7cmV0dXJuIGFqYXhCZWZvcmVTZW5kKGYsYSk9PT0hMT8oZShcImFib3J0XCIpLCExKTood2luZG93W2JdPWZ1bmN0aW9uKGIpe2QoKSxhamF4U3VjY2VzcyhiLGYsYSl9LGMub25lcnJvcj1mdW5jdGlvbigpe2UoXCJlcnJvclwiKX0sYy5zcmM9YS51cmwucmVwbGFjZSgvPVxcPy8sXCI9XCIrYiksJChcImhlYWRcIikuYXBwZW5kKGMpLGEudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZShcInRpbWVvdXRcIil9LGEudGltZW91dCkpLGYpfXJldHVybiAkLmFqYXgoYSl9LCQuYWpheFNldHRpbmdzPXt0eXBlOlwiR0VUXCIsYmVmb3JlU2VuZDplbXB0eSxzdWNjZXNzOmVtcHR5LGVycm9yOmVtcHR5LGNvbXBsZXRlOmVtcHR5LGNvbnRleHQ6bnVsbCxnbG9iYWw6ITAseGhyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3R9LGFjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdFwiLGpzb246anNvblR5cGUseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGh0bWw6aHRtbFR5cGUsdGV4dDpcInRleHQvcGxhaW5cIn0sY3Jvc3NEb21haW46ITEsdGltZW91dDowLHByb2Nlc3NEYXRhOiEwLGNhY2hlOiEwfSwkLmFqYXg9ZnVuY3Rpb24ob3B0aW9ucyl7dmFyIHNldHRpbmdzPSQuZXh0ZW5kKHt9LG9wdGlvbnN8fHt9KTtmb3Ioa2V5IGluICQuYWpheFNldHRpbmdzKXNldHRpbmdzW2tleV09PT11bmRlZmluZWQmJihzZXR0aW5nc1trZXldPSQuYWpheFNldHRpbmdzW2tleV0pO2FqYXhTdGFydChzZXR0aW5ncyksc2V0dGluZ3MuY3Jvc3NEb21haW58fChzZXR0aW5ncy5jcm9zc0RvbWFpbj0vXihbXFx3LV0rOik/XFwvXFwvKFteXFwvXSspLy50ZXN0KHNldHRpbmdzLnVybCkmJlJlZ0V4cC4kMiE9d2luZG93LmxvY2F0aW9uLmhvc3QpLHNldHRpbmdzLnVybHx8KHNldHRpbmdzLnVybD13aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSksc2VyaWFsaXplRGF0YShzZXR0aW5ncyksc2V0dGluZ3MuY2FjaGU9PT0hMSYmKHNldHRpbmdzLnVybD1hcHBlbmRRdWVyeShzZXR0aW5ncy51cmwsXCJfPVwiK0RhdGUubm93KCkpKTt2YXIgZGF0YVR5cGU9c2V0dGluZ3MuZGF0YVR5cGUsaGFzUGxhY2Vob2xkZXI9Lz1cXD8vLnRlc3Qoc2V0dGluZ3MudXJsKTtpZihkYXRhVHlwZT09XCJqc29ucFwifHxoYXNQbGFjZWhvbGRlcilyZXR1cm4gaGFzUGxhY2Vob2xkZXJ8fChzZXR0aW5ncy51cmw9YXBwZW5kUXVlcnkoc2V0dGluZ3MudXJsLFwiY2FsbGJhY2s9P1wiKSksJC5hamF4SlNPTlAoc2V0dGluZ3MpO3ZhciBtaW1lPXNldHRpbmdzLmFjY2VwdHNbZGF0YVR5cGVdLGJhc2VIZWFkZXJzPXt9LHByb3RvY29sPS9eKFtcXHctXSs6KVxcL1xcLy8udGVzdChzZXR0aW5ncy51cmwpP1JlZ0V4cC4kMTp3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wseGhyPXNldHRpbmdzLnhocigpLGFib3J0VGltZW91dDtzZXR0aW5ncy5jcm9zc0RvbWFpbnx8KGJhc2VIZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpLG1pbWUmJihiYXNlSGVhZGVycy5BY2NlcHQ9bWltZSxtaW1lLmluZGV4T2YoXCIsXCIpPi0xJiYobWltZT1taW1lLnNwbGl0KFwiLFwiLDIpWzBdKSx4aHIub3ZlcnJpZGVNaW1lVHlwZSYmeGhyLm92ZXJyaWRlTWltZVR5cGUobWltZSkpO2lmKHNldHRpbmdzLmNvbnRlbnRUeXBlfHxzZXR0aW5ncy5jb250ZW50VHlwZSE9PSExJiZzZXR0aW5ncy5kYXRhJiZzZXR0aW5ncy50eXBlLnRvVXBwZXJDYXNlKCkhPVwiR0VUXCIpYmFzZUhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09c2V0dGluZ3MuY29udGVudFR5cGV8fFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCI7c2V0dGluZ3MuaGVhZGVycz0kLmV4dGVuZChiYXNlSGVhZGVycyxzZXR0aW5ncy5oZWFkZXJzfHx7fSkseGhyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHhoci5yZWFkeVN0YXRlPT00KXt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWVtcHR5LGNsZWFyVGltZW91dChhYm9ydFRpbWVvdXQpO3ZhciByZXN1bHQsZXJyb3I9ITE7aWYoeGhyLnN0YXR1cz49MjAwJiZ4aHIuc3RhdHVzPDMwMHx8eGhyLnN0YXR1cz09MzA0fHx4aHIuc3RhdHVzPT0wJiZwcm90b2NvbD09XCJmaWxlOlwiKXtkYXRhVHlwZT1kYXRhVHlwZXx8bWltZVRvRGF0YVR5cGUoeGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpKSxyZXN1bHQ9eGhyLnJlc3BvbnNlVGV4dDt0cnl7ZGF0YVR5cGU9PVwic2NyaXB0XCI/KDEsZXZhbCkocmVzdWx0KTpkYXRhVHlwZT09XCJ4bWxcIj9yZXN1bHQ9eGhyLnJlc3BvbnNlWE1MOmRhdGFUeXBlPT1cImpzb25cIiYmKHJlc3VsdD1ibGFua1JFLnRlc3QocmVzdWx0KT9udWxsOiQucGFyc2VKU09OKHJlc3VsdCkpfWNhdGNoKGUpe2Vycm9yPWV9ZXJyb3I/YWpheEVycm9yKGVycm9yLFwicGFyc2VyZXJyb3JcIix4aHIsc2V0dGluZ3MpOmFqYXhTdWNjZXNzKHJlc3VsdCx4aHIsc2V0dGluZ3MpfWVsc2UgYWpheEVycm9yKG51bGwseGhyLnN0YXR1cz9cImVycm9yXCI6XCJhYm9ydFwiLHhocixzZXR0aW5ncyl9fTt2YXIgYXN5bmM9XCJhc3luY1wiaW4gc2V0dGluZ3M/c2V0dGluZ3MuYXN5bmM6ITA7eGhyLm9wZW4oc2V0dGluZ3MudHlwZSxzZXR0aW5ncy51cmwsYXN5bmMpO2ZvcihuYW1lIGluIHNldHRpbmdzLmhlYWRlcnMpeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSxzZXR0aW5ncy5oZWFkZXJzW25hbWVdKTtyZXR1cm4gYWpheEJlZm9yZVNlbmQoeGhyLHNldHRpbmdzKT09PSExPyh4aHIuYWJvcnQoKSwhMSk6KHNldHRpbmdzLnRpbWVvdXQ+MCYmKGFib3J0VGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZT1lbXB0eSx4aHIuYWJvcnQoKSxhamF4RXJyb3IobnVsbCxcInRpbWVvdXRcIix4aHIsc2V0dGluZ3MpfSxzZXR0aW5ncy50aW1lb3V0KSkseGhyLnNlbmQoc2V0dGluZ3MuZGF0YT9zZXR0aW5ncy5kYXRhOm51bGwpLHhocil9LCQuZ2V0PWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAkLmFqYXgocGFyc2VBcmd1bWVudHMuYXBwbHkobnVsbCxhcmd1bWVudHMpKX0sJC5wb3N0PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXBhcnNlQXJndW1lbnRzLmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gZS50eXBlPVwiUE9TVFwiLCQuYWpheChlKX0sJC5nZXRKU09OPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1wYXJzZUFyZ3VtZW50cy5hcHBseShudWxsLGFyZ3VtZW50cyk7cmV0dXJuIGQuZGF0YVR5cGU9XCJqc29uXCIsJC5hamF4KGQpfSwkLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgZD10aGlzLGU9YS5zcGxpdCgvXFxzLyksZixnPXBhcnNlQXJndW1lbnRzKGEsYixjKSxoPWcuc3VjY2VzcztyZXR1cm4gZS5sZW5ndGg+MSYmKGcudXJsPWVbMF0sZj1lWzFdKSxnLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7ZC5odG1sKGY/JChcIjxkaXY+XCIpLmh0bWwoYS5yZXBsYWNlKHJzY3JpcHQsXCJcIikpLmZpbmQoZik6YSksaCYmaC5hcHBseShkLGFyZ3VtZW50cyl9LCQuYWpheChnKSx0aGlzfTt2YXIgZXNjYXBlPWVuY29kZVVSSUNvbXBvbmVudDskLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGM9W107cmV0dXJuIGMuYWRkPWZ1bmN0aW9uKGEsYil7dGhpcy5wdXNoKGVzY2FwZShhKStcIj1cIitlc2NhcGUoYikpfSxzZXJpYWxpemUoYyxhLGIpLGMuam9pbihcIiZcIikucmVwbGFjZSgvJTIwL2csXCIrXCIpfX0oWmVwdG8pLGZ1bmN0aW9uKGEpe2EuZm4uc2VyaWFsaXplQXJyYXk9ZnVuY3Rpb24oKXt2YXIgYj1bXSxjO3JldHVybiBhKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuZ2V0KDApLmVsZW1lbnRzKSkuZWFjaChmdW5jdGlvbigpe2M9YSh0aGlzKTt2YXIgZD1jLmF0dHIoXCJ0eXBlXCIpO3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9XCJmaWVsZHNldFwiJiYhdGhpcy5kaXNhYmxlZCYmZCE9XCJzdWJtaXRcIiYmZCE9XCJyZXNldFwiJiZkIT1cImJ1dHRvblwiJiYoZCE9XCJyYWRpb1wiJiZkIT1cImNoZWNrYm94XCJ8fHRoaXMuY2hlY2tlZCkmJmIucHVzaCh7bmFtZTpjLmF0dHIoXCJuYW1lXCIpLHZhbHVlOmMudmFsKCl9KX0pLGJ9LGEuZm4uc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMuc2VyaWFsaXplQXJyYXkoKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHVzaChlbmNvZGVVUklDb21wb25lbnQoYi5uYW1lKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYi52YWx1ZSkpfSksYS5qb2luKFwiJlwiKX0sYS5mbi5zdWJtaXQ9ZnVuY3Rpb24oYil7aWYoYil0aGlzLmJpbmQoXCJzdWJtaXRcIixiKTtlbHNlIGlmKHRoaXMubGVuZ3RoKXt2YXIgYz1hLkV2ZW50KFwic3VibWl0XCIpO3RoaXMuZXEoMCkudHJpZ2dlcihjKSxjLmRlZmF1bHRQcmV2ZW50ZWR8fHRoaXMuZ2V0KDApLnN1Ym1pdCgpfXJldHVybiB0aGlzfX0oWmVwdG8pLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gcyhhKXtyZXR1cm4gdChhLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pLyxcIiQxLSQyXCIpKX1mdW5jdGlvbiB0KGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gZD9kK2E6dChhKX12YXIgYz1cIlwiLGQsZSxmLGc9e1dlYmtpdDpcIndlYmtpdFwiLE1vejpcIlwiLE86XCJvXCIsbXM6XCJNU1wifSxoPXdpbmRvdy5kb2N1bWVudCxpPWguY3JlYXRlRWxlbWVudChcImRpdlwiKSxqPS9eKCh0cmFuc2xhdGV8cm90YXRlfHNjYWxlKShYfFl8WnwzZCk/fG1hdHJpeCgzZCk/fHBlcnNwZWN0aXZlfHNrZXcoWHxZKT8pJC9pLGssbCxtLG4sbyxwLHEscj17fTthLmVhY2goZyxmdW5jdGlvbihhLGUpe2lmKGkuc3R5bGVbYStcIlRyYW5zaXRpb25Qcm9wZXJ0eVwiXSE9PWIpcmV0dXJuIGM9XCItXCIrdChhKStcIi1cIixkPWUsITF9KSxrPWMrXCJ0cmFuc2Zvcm1cIixyW2w9YytcInRyYW5zaXRpb24tcHJvcGVydHlcIl09clttPWMrXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCJdPXJbbj1jK1widHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09cltvPWMrXCJhbmltYXRpb24tbmFtZVwiXT1yW3A9YytcImFuaW1hdGlvbi1kdXJhdGlvblwiXT1yW3E9YytcImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJcIixhLmZ4PXtvZmY6ZD09PWImJmkuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5PT09YixzcGVlZHM6e19kZWZhdWx0OjQwMCxmYXN0OjIwMCxzbG93OjYwMH0sY3NzUHJlZml4OmMsdHJhbnNpdGlvbkVuZDp1KFwiVHJhbnNpdGlvbkVuZFwiKSxhbmltYXRpb25FbmQ6dShcIkFuaW1hdGlvbkVuZFwiKX0sYS5mbi5hbmltYXRlPWZ1bmN0aW9uKGIsYyxkLGUpe3JldHVybiBhLmlzUGxhaW5PYmplY3QoYykmJihkPWMuZWFzaW5nLGU9Yy5jb21wbGV0ZSxjPWMuZHVyYXRpb24pLGMmJihjPSh0eXBlb2YgYz09XCJudW1iZXJcIj9jOmEuZnguc3BlZWRzW2NdfHxhLmZ4LnNwZWVkcy5fZGVmYXVsdCkvMWUzKSx0aGlzLmFuaW0oYixjLGQsZSl9LGEuZm4uYW5pbT1mdW5jdGlvbihjLGQsZSxmKXt2YXIgZyxoPXt9LGksdD1cIlwiLHU9dGhpcyx2LHc9YS5meC50cmFuc2l0aW9uRW5kO2Q9PT1iJiYoZD0uNCksYS5meC5vZmYmJihkPTApO2lmKHR5cGVvZiBjPT1cInN0cmluZ1wiKWhbb109YyxoW3BdPWQrXCJzXCIsaFtxXT1lfHxcImxpbmVhclwiLHc9YS5meC5hbmltYXRpb25FbmQ7ZWxzZXtpPVtdO2ZvcihnIGluIGMpai50ZXN0KGcpP3QrPWcrXCIoXCIrY1tnXStcIikgXCI6KGhbZ109Y1tnXSxpLnB1c2gocyhnKSkpO3QmJihoW2tdPXQsaS5wdXNoKGspKSxkPjAmJnR5cGVvZiBjPT1cIm9iamVjdFwiJiYoaFtsXT1pLmpvaW4oXCIsIFwiKSxoW21dPWQrXCJzXCIsaFtuXT1lfHxcImxpbmVhclwiKX1yZXR1cm4gdj1mdW5jdGlvbihiKXtpZih0eXBlb2YgYiE9XCJ1bmRlZmluZWRcIil7aWYoYi50YXJnZXQhPT1iLmN1cnJlbnRUYXJnZXQpcmV0dXJuO2EoYi50YXJnZXQpLnVuYmluZCh3LHYpfWEodGhpcykuY3NzKHIpLGYmJmYuY2FsbCh0aGlzKX0sZD4wJiZ0aGlzLmJpbmQodyx2KSx0aGlzLnNpemUoKSYmdGhpcy5nZXQoMCkuY2xpZW50TGVmdCx0aGlzLmNzcyhoKSxkPD0wJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dS5lYWNoKGZ1bmN0aW9uKCl7di5jYWxsKHRoaXMpfSl9LDApLHRoaXN9LGk9bnVsbH0oWmVwdG8pIiwiLy8gICAgIFplcHRvLmpzXG4vLyAgICAgKGMpIDIwMTAtMjAxNSBUaG9tYXMgRnVjaHNcbi8vICAgICBaZXB0by5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuOyhmdW5jdGlvbigkLCB1bmRlZmluZWQpe1xuICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gICAgb3JpZ1Nob3cgPSAkLmZuLnNob3csIG9yaWdIaWRlID0gJC5mbi5oaWRlLCBvcmlnVG9nZ2xlID0gJC5mbi50b2dnbGVcblxuICBmdW5jdGlvbiBhbmltKGVsLCBzcGVlZCwgb3BhY2l0eSwgc2NhbGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBzcGVlZCA9PSAnZnVuY3Rpb24nICYmICFjYWxsYmFjaykgY2FsbGJhY2sgPSBzcGVlZCwgc3BlZWQgPSB1bmRlZmluZWRcbiAgICB2YXIgcHJvcHMgPSB7IG9wYWNpdHk6IG9wYWNpdHkgfVxuICAgIGlmIChzY2FsZSkge1xuICAgICAgcHJvcHMuc2NhbGUgPSBzY2FsZVxuICAgICAgZWwuY3NzKCQuZnguY3NzUHJlZml4ICsgJ3RyYW5zZm9ybS1vcmlnaW4nLCAnMCAwJylcbiAgICB9XG4gICAgcmV0dXJuIGVsLmFuaW1hdGUocHJvcHMsIHNwZWVkLCBudWxsLCBjYWxsYmFjaylcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGUoZWwsIHNwZWVkLCBzY2FsZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gYW5pbShlbCwgc3BlZWQsIDAsIHNjYWxlLCBmdW5jdGlvbigpe1xuICAgICAgb3JpZ0hpZGUuY2FsbCgkKHRoaXMpKVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbCh0aGlzKVxuICAgIH0pXG4gIH1cblxuICAkLmZuLnNob3cgPSBmdW5jdGlvbihzcGVlZCwgY2FsbGJhY2spIHtcbiAgICBvcmlnU2hvdy5jYWxsKHRoaXMpXG4gICAgaWYgKHNwZWVkID09PSB1bmRlZmluZWQpIHNwZWVkID0gMFxuICAgIGVsc2UgdGhpcy5jc3MoJ29wYWNpdHknLCAwKVxuICAgIHJldHVybiBhbmltKHRoaXMsIHNwZWVkLCAxLCAnMSwxJywgY2FsbGJhY2spXG4gIH1cblxuICAkLmZuLmhpZGUgPSBmdW5jdGlvbihzcGVlZCwgY2FsbGJhY2spIHtcbiAgICBpZiAoc3BlZWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG9yaWdIaWRlLmNhbGwodGhpcylcbiAgICBlbHNlIHJldHVybiBoaWRlKHRoaXMsIHNwZWVkLCAnMCwwJywgY2FsbGJhY2spXG4gIH1cblxuICAkLmZuLnRvZ2dsZSA9IGZ1bmN0aW9uKHNwZWVkLCBjYWxsYmFjaykge1xuICAgIGlmIChzcGVlZCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBzcGVlZCA9PSAnYm9vbGVhbicpXG4gICAgICByZXR1cm4gb3JpZ1RvZ2dsZS5jYWxsKHRoaXMsIHNwZWVkKVxuICAgIGVsc2UgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIGVsID0gJCh0aGlzKVxuICAgICAgZWxbZWwuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnID8gJ3Nob3cnIDogJ2hpZGUnXShzcGVlZCwgY2FsbGJhY2spXG4gICAgfSlcbiAgfVxuXG4gICQuZm4uZmFkZVRvID0gZnVuY3Rpb24oc3BlZWQsIG9wYWNpdHksIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGFuaW0odGhpcywgc3BlZWQsIG9wYWNpdHksIG51bGwsIGNhbGxiYWNrKVxuICB9XG5cbiAgJC5mbi5mYWRlSW4gPSBmdW5jdGlvbihzcGVlZCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5jc3MoJ29wYWNpdHknKVxuICAgIGlmICh0YXJnZXQgPiAwKSB0aGlzLmNzcygnb3BhY2l0eScsIDApXG4gICAgZWxzZSB0YXJnZXQgPSAxXG4gICAgcmV0dXJuIG9yaWdTaG93LmNhbGwodGhpcykuZmFkZVRvKHNwZWVkLCB0YXJnZXQsIGNhbGxiYWNrKVxuICB9XG5cbiAgJC5mbi5mYWRlT3V0ID0gZnVuY3Rpb24oc3BlZWQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGhpZGUodGhpcywgc3BlZWQsIG51bGwsIGNhbGxiYWNrKVxuICB9XG5cbiAgJC5mbi5mYWRlVG9nZ2xlID0gZnVuY3Rpb24oc3BlZWQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIGVsID0gJCh0aGlzKVxuICAgICAgZWxbXG4gICAgICAgIChlbC5jc3MoJ29wYWNpdHknKSA9PSAwIHx8IGVsLmNzcygnZGlzcGxheScpID09ICdub25lJykgPyAnZmFkZUluJyA6ICdmYWRlT3V0J1xuICAgICAgXShzcGVlZCwgY2FsbGJhY2spXG4gICAgfSlcbiAgfVxuXG59KShaZXB0bykiXX0=
